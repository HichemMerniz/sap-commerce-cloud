import{a as _i,b as gi,c as Ci,d as fi,e as Fe}from"./chunk-ZOOA2E3T.js";import{a as se,b as si,c as ci,d as ce,f as Ze,i as li,j as mi,k as pi,l as ui,s as di}from"./chunk-RJ7JOQNS.js";import{n as Je}from"./chunk-BKUZX3AQ.js";import{c as Ye}from"./chunk-4YEDMUBT.js";import{C as oi,H as ai}from"./chunk-TQW2KZ64.js";import{A as jt,Aa as ei,B as oe,Ba as ti,C as zt,D as ae,E as Ce,F as G,Fa as Be,Ga as ii,M as ke,N as qe,O as fe,P as Gt,Q as We,T as Ht,Ua as ni,b as ne,c as K,d as re,da as Qt,e as _e,g as Mt,h as Rt,i as Vt,j as Nt,k as ge,n as Qe,na as De,o as Ee,oa as Kt,ob as ri,r as we,s as Le,sa as qt,ta as Wt,u as Pt,v as Ke,w as Ot,wa as Yt,x as $t,xa as Jt,ya as Zt,z as Ut,za as Xt}from"./chunk-VAXL2NXV.js";import{$a as T,$d as Lt,A as Ne,Ab as L,Ba as C,Bb as S,Ca as f,Cb as Ct,Cd as Tt,D as ot,Dc as yt,Eb as ft,Ed as It,Ef as R,Fb as ht,Ff as Bt,Gb as vt,H as at,Ha as Pe,I as D,Id as At,Jb as Z,Kb as Y,Kd as Et,Ke as Dt,L as pe,M as xe,Ma as dt,Mf as Ft,Nd as wt,O as st,Oa as _t,Ob as s,P as V,Pa as a,Pb as c,Qa as x,Qb as Te,Rd as ie,S as Se,Tb as M,W as ct,X as lt,Zb as xt,_a as _,a as Ve,ab as p,b as it,ba as mt,be as Ue,cb as k,e as q,eb as gt,ee as je,ef as He,fa as pt,fc as St,fe as ze,gb as l,h as H,hb as u,hc as Ie,he as kt,ia as N,ib as b,ic as j,jb as I,kb as A,lb as Oe,le as de,m as nt,mb as y,mc as bt,na as be,nc as J,nd as z,oa as ee,ob as v,pb as d,qa as P,r as rt,ra as ye,sb as F,tc as Ae,te as Q,ue as Ge,v as W,va as B,vb as O,w as ve,wa as te,wb as $,xb as U,xc as $e,ya as ut,yb as w,zb as g,zc as ue}from"./chunk-ST632LWR.js";function Ei(t,r){if(t&1){let n=y();l(0,"cx-message",16),s(1,"cxTranslate"),v("closeMessage",function(){C(n);let i=d(2);return f(i.closeDialogAlert())}),u()}if(t&2){let n=d(2);p("text",c(1,2,"asm.saveCart.dialog.saveInfo"))("type",n.globalMessageType.MSG_TYPE_INFO)}}function wi(t,r){if(t&1&&(I(0),l(1,"div",14),_(2,Ei,2,4,"cx-message",15),s(3,"async"),u(),A()),t&2){let n=d();a(2),p("ngIf",c(3,1,n.showDialogAlert$))}}function Li(t,r){if(t&1){let n=y();l(0,"cx-message",16),s(1,"cxTranslate"),v("closeMessage",function(){C(n);let i=d(2);return f(i.closeDialogAlert())}),u()}if(t&2){let n=d(2);p("text",c(1,2,"asm.saveCart.dialog.disableInfo"))("type",n.globalMessageType.MSG_TYPE_WARNING)}}function ki(t,r){if(t&1&&(l(0,"div",14),_(1,Li,2,4,"cx-message",15),s(2,"async"),u()),t&2){let n=d();a(),p("ngIf",c(2,1,n.showDialogAlert$))}}var Di=["bindToCart"],Bi=["saveInactiveCart"];function Fi(t,r){if(t&1){let n=y();l(0,"button",10,1),s(2,"async"),s(3,"async"),s(4,"async"),v("click",function(){C(n);let i=d();return f(i.bindCartToCustomer())}),l(5,"span"),s(6,"async"),g(7),s(8,"cxTranslate"),u(),b(9,"cx-dot-spinner"),s(10,"async"),s(11,"cxTranslate"),u()}if(t&2){let n=d();k("cx-asm-active",c(2,9,n.valid$))("cx-bind-loading",c(3,11,n.loading$)),p("disabled",!c(4,13,n.valid$)),a(5),T("aria-hidden",c(6,15,n.loading$)),a(2),S(" ",c(8,17,"asm.bindCart.bindCartToCustomer")," "),a(2),T("aria-hidden",!c(10,19,n.loading$))("aria-label",c(11,21,"common.loading"))}}function Mi(t,r){if(t&1){let n=y();l(0,"button",11,2),s(2,"async"),v("click",function(){C(n);let i=d();return f(i.onSaveInactiveCart())}),l(3,"span"),s(4,"async"),g(5),s(6,"cxTranslate"),u(),b(7,"cx-dot-spinner"),s(8,"async"),s(9,"cxTranslate"),u()}if(t&2){let n=d();k("cx-bind-loading",c(2,6,n.loading$)),a(3),T("aria-hidden",c(4,8,n.loading$)),a(2),S(" ",c(6,10,"asm.saveCart.saveCartBtn")," "),a(2),T("aria-hidden",!c(8,12,n.loading$))("aria-label",c(9,14,"common.loading"))}}function Ri(t,r){if(t&1){let n=y();l(0,"cx-message",14),s(1,"cxTranslate"),v("closeMessage",function(){C(n);let i=d();return f(i.closeDialogInfoAlert())}),u()}if(t&2){let n=d();p("text",c(1,2,"asm.createCustomerForm.createAccountAlert"))("type",n.globalMessageType.MSG_TYPE_INFO)}}function Vi(t,r){if(t&1){let n=y();l(0,"cx-message",14),v("closeMessage",function(){C(n);let i=d().index,o=d();return f(o.closeDialogBackendErroAlert(i))}),u()}if(t&2){let n=d().$implicit,e=d();p("text",n)("type",e.globalMessageType.MSG_TYPE_ERROR)}}function Ni(t,r){if(t&1&&(I(0),_(1,Vi,1,2,"cx-message",8),A()),t&2){let n=r.index,e=d();a(),p("ngIf",e.showDialogBackendErrorAlerts[n])}}function Pi(t,r){if(t&1&&(l(0,"div")(1,"div",15)(2,"label")(3,"span",16),g(4),s(5,"cxTranslate"),u(),b(6,"input",17),s(7,"cxTranslate"),b(8,"cx-form-errors",18),u()(),l(9,"div",15)(10,"label")(11,"span",16),g(12),s(13,"cxTranslate"),u(),b(14,"input",19),s(15,"cxTranslate"),b(16,"cx-form-errors",18),u()(),l(17,"div",15)(18,"label")(19,"span",16),g(20),s(21,"cxTranslate"),u(),b(22,"input",20),s(23,"cxTranslate"),b(24,"cx-form-errors",18),u()()()),t&2){let n=d();a(4),L(c(5,9,"asm.createCustomerForm.firstName.label")),a(2),F("placeholder",c(7,11,"asm.createCustomerForm.firstName.placeholder")),a(2),p("control",n.registerForm.get("firstName")),a(4),L(c(13,13,"asm.createCustomerForm.lastName.label")),a(2),F("placeholder",c(15,15,"asm.createCustomerForm.lastName.placeholder")),a(2),p("control",n.registerForm.get("lastName")),a(4),L(c(21,17,"asm.createCustomerForm.emailAddress.label")),a(2),F("placeholder",c(23,19,"asm.createCustomerForm.emailAddress.placeholder")),a(2),p("control",n.registerForm.get("email"))}}function Oi(t,r){t&1&&(l(0,"div",21),b(1,"cx-spinner"),u())}function $i(t,r){if(t&1){let n=y();l(0,"form",2),v("ngSubmit",function(){C(n);let i=d();return f(i.onSubmit())}),l(1,"label"),b(2,"input",3),s(3,"cxTranslate"),s(4,"cxTranslate"),b(5,"cx-form-errors",4),u(),l(6,"label"),b(7,"input",5),s(8,"cxTranslate"),s(9,"cxTranslate"),b(10,"cx-form-errors",4),u(),l(11,"button",6),g(12),s(13,"cxTranslate"),u()()}if(t&2){let n=d();p("formGroup",n.csAgentLoginForm),a(2),F("placeholder",c(3,8,"asm.loginForm.userId.label")),T("aria-label",c(4,10,"asm.loginForm.userId.label")),a(3),p("control",n.csAgentLoginForm.get("userId")),a(2),F("placeholder",c(8,12,"asm.loginForm.password.label")),T("aria-label",c(9,14,"asm.loginForm.password.label")),a(3),p("control",n.csAgentLoginForm.get("password")),a(2),S(" ",c(13,16,"asm.loginForm.submit")," ")}}function Ui(t,r){t&1&&(b(0,"cx-dot-spinner",7),s(1,"cxTranslate")),t&2&&T("aria-label",c(1,1,"common.loading"))}var ji=["resultList"],zi=["searchTerm"],Gi=["createCustomerLink"],Hi=["searchResultItem"];function Qi(t,r){if(t&1){let n=y();l(0,"button",12,2),v("keydown.arrowup",function(i){C(n);let o=d(2);return f(o.focusPreviousChild(i))})("keydown.arrowdown",function(i){C(n);let o=d(2);return f(o.focusNextChild(i))})("keydown.arrowright",function(i){C(n);let o=d(2);return f(o.focusInputText(i))})("keydown.arrowleft",function(i){C(n);let o=d(2);return f(o.focusInputText(i))})("keydown.enter",function(i){let o=C(n).$implicit,m=d(2);return f(m.selectCustomerFromList(i,o))})("keydown.escape",function(i){C(n);let o=d(2);return f(o.closeResults(i))})("keydown.home",function(i){C(n);let o=d(2);return f(o.focusInputText(i))})("keydown.end",function(i){C(n);let o=d(2);return f(o.focusInputText(i))})("click",function(i){let o=C(n).$implicit,m=d(2);return f(m.selectCustomerFromList(i,o))}),l(2,"span",13),g(3),u(),l(4,"span",14),g(5),u()()}if(t&2){let n=r.$implicit,e=r.index,i=d(2);k("active",i.activeFocusedButtonIndex===e),p("tabindex",i.activeFocusedButtonIndex===e?0:-1),T("aria-selected",i.activeFocusedButtonIndex===e),a(3),L(n.name),a(2),L(n.uid)}}function Ki(t,r){if(t&1){let n=y();l(0,"button",15,2),v("click",function(){C(n);let i=d(2);return f(i.createCustomer())})("keydown.escape",function(i){C(n);let o=d(2);return f(o.closeResults(i))})("keydown.arrowright",function(i){C(n);let o=d(2);return f(o.focusInputText(i))})("keydown.arrowleft",function(i){C(n);let o=d(2);return f(o.focusInputText(i))})("keydown.home",function(i){C(n);let o=d(2);return f(o.focusInputText(i))})("keydown.end",function(i){C(n);let o=d(2);return f(o.focusInputText(i))}),l(2,"span"),g(3),s(4,"cxTranslate"),u(),l(5,"span",16,3),g(7),s(8,"cxTranslate"),u()()}if(t&2){let n=d(2);k("active",n.activeFocusedButtonIndex===0),T("aria-selected",n.activeFocusedButtonIndex===0),a(3),L(c(4,5,"asm.customerSearch.noMatchResult")),a(4),L(c(8,7,"asm.customerSearch.createCustomer"))}}function qi(t,r){if(t&1&&(l(0,"div",9,1),_(2,Qi,6,6,"button",10)(3,Ki,9,9,"button",11),s(4,"async"),u()),t&2){let n=r.ngIf,e=d(),i=w(3);a(2),p("ngForOf",n.entries),a(),p("ngIf",!c(4,2,e.searchResultsLoading$)&&i.value.length>=3&&!!n.entries&&n.entries.length<=0)}}function Wi(t,r){t&1&&(l(0,"div",9),b(1,"cx-dot-spinner",17),s(2,"cxTranslate"),u()),t&2&&(a(),T("aria-label",c(2,1,"common.loading")))}var Yi=["asmCustomer360Launcher"];function Ji(t,r){if(t&1){let n=y();l(0,"button",7,0),v("click",function(){C(n);let i=d(2);return f(i.openAsmCustomer360())}),g(2),s(3,"cxTranslate"),u()}t&2&&(a(2),S(" ",c(3,1,"asm.asmCustomer360Button")," "))}function Zi(t,r){if(t&1){let n=y();I(0),l(1,"div",2)(2,"label",3),g(3),u(),l(4,"label",4),g(5),u()(),b(6,"cx-asm-bind-cart"),_(7,Ji,4,3,"button",5),l(8,"button",6),v("click",function(){C(n);let i=d();return f(i.logoutCustomer())}),g(9),s(10,"cxTranslate"),u(),A()}if(t&2){let n=d();a(3),L(n.customer==null?null:n.customer.name),a(2),L(n.customer==null?null:n.customer.uid),a(2),p("ngIf",n.isAsmCustomer360Configured&&n.customer),a(2),S(" ",c(10,4,"asm.endSession")," ")}}function Xi(t,r){t&1&&(l(0,"span",3),g(1),s(2,"cxTranslate"),u()),t&2&&(a(),S(" ",c(2,1,"asm.toggleUi.collapse")," "))}function en(t,r){t&1&&(l(0,"span",3),g(1),s(2,"cxTranslate"),u()),t&2&&(a(),S(" ",c(2,1,"asm.toggleUi.expand")," "))}var tn=["customerListLink"],vi=["addNewCustomerLink"];function nn(t,r){if(t&1){let n=y();l(0,"div",12)(1,"a",13,0),v("click",function(){C(n);let i=d();return f(i.showCustomList())}),b(3,"cx-icon",14),l(4,"span"),g(5),s(6,"cxTranslate"),u()()()}if(t&2){let n=d();a(3),p("type",n.iconTypes.USER_FRIENDS),a(2),L(c(6,2,"asm.customers"))}}function rn(t,r){t&1&&b(0,"cx-asm-session-timer")}function on(t,r){if(t&1){let n=y();l(0,"button",15),s(1,"cxTranslate"),v("click",function(){C(n);let i=d();return f(i.hideUi())}),u()}t&2&&F("title",c(1,1,"asm.hideUi"))}function an(t,r){if(t&1){let n=y();l(0,"button",16),s(1,"cxTranslate"),v("click",function(){C(n);let i=d();return f(i.logout())}),u()}t&2&&F("title",c(1,1,"asm.logout"))}function sn(t,r){t&1&&b(0,"cx-customer-emulation")}function cn(t,r){if(t&1){let n=y();l(0,"cx-message",19),s(1,"cxTranslate"),v("closeMessage",function(){C(n);let i=d(4);return f(i.closeDialogConfirmationAlert())}),u()}if(t&2){let n=d(4);p("text",c(1,2,"asm.createCustomerSuccessfullyAlert"))("type",n.globalMessageType.MSG_TYPE_CONFIRMATION)}}function ln(t,r){if(t&1){let n=y();l(0,"cx-message",19),s(1,"cxTranslate"),v("closeMessage",function(){C(n);let i=d(4);return f(i.closeDeeplinkCartInfoAlert())}),u()}if(t&2){let n=d(4);p("text",c(1,2,n.deeplinkCartAlertKey))("type",n.globalMessageType.MSG_TYPE_INFO)}}function mn(t,r){if(t&1){let n=y();l(0,"cx-message",19),s(1,"cxTranslate"),v("closeMessage",function(){C(n);let i=d(4);return f(i.closeCustomerEmulationInfoAlert())}),u()}if(t&2){let n=d(4);p("text",c(1,2,"asm.startCustomerEmulationAlertInfo"))("type",n.globalMessageType.MSG_TYPE_INFO)}}function pn(t,r){if(t&1&&(I(0),_(1,sn,1,0,"cx-customer-emulation",9)(2,cn,2,4,"cx-message",18)(3,ln,2,4,"cx-message",18),s(4,"async"),_(5,mn,2,4,"cx-message",18),A()),t&2){let n=d(2).ngIf,e=d();a(),p("ngIf",n),a(),p("ngIf",n&&e.showCreateCustomerSuccessfullyAlert),a(),p("ngIf",c(4,4,e.showDeeplinkCartInfoAlert$)),a(2),p("ngIf",n&&e.showCustomerEmulationInfoAlert)}}function un(t,r){if(t&1){let n=y();l(0,"cx-customer-selection",21),v("submitEvent",function(i){C(n);let o=d(4);return f(o.startCustomerEmulationSession(i))}),u()}}function dn(t,r){if(t&1&&_(0,un,1,0,"cx-customer-selection",20),t&2){let n=d(2).ngIf;p("ngIf",n)}}function _n(t,r){if(t&1&&(I(0),_(1,pn,6,6,"ng-container",17),s(2,"async"),_(3,dn,1,1,"ng-template",null,2,M),A()),t&2){let n=w(4),e=d(2);a(),p("ngIf",c(2,2,e.customer$))("ngIfElse",n)}}function gn(t,r){if(t&1){let n=y();l(0,"cx-csagent-login-form",23),s(1,"async"),v("submitEvent",function(i){C(n);let o=d(3);return f(o.loginCustomerSupportAgent(i))}),u()}if(t&2){let n=d(3);p("csAgentTokenLoading",c(1,1,n.csAgentTokenLoading$))}}function Cn(t,r){if(t&1&&_(0,gn,2,3,"cx-csagent-login-form",22),t&2){let n=d().ngIf;p("ngIf",n)}}function fn(t,r){if(t&1&&(I(0),_(1,_n,5,4,"ng-container",17),s(2,"async"),_(3,Cn,1,1,"ng-template",null,1,M),A()),t&2){let n=w(4),e=d();a(),p("ngIf",c(2,2,e.customerSupportAgentLoggedIn$))("ngIfElse",n)}}var hn=(t,r)=>({customerA:t,customerB:r}),vn=t=>({customerListsPage:t}),xn=t=>({customerSearchPage:t}),Sn=(t,r)=>({customerEntry:t,column:r,showHeader:!1}),et=(t,r)=>({customerEntry:t,column:r,showHeader:!0}),xi=(t,r)=>({column:t,customerEntry:r}),Si=t=>({count:t}),bi=t=>({ariaLabel:t,ariaControls:"asm-cusomer-list-table"});function bn(t,r){}function yn(t,r){t&1&&_(0,bn,0,0,"ng-template")}function Tn(t,r){}function In(t,r){t&1&&_(0,Tn,0,0,"ng-template")}function An(t,r){}function En(t,r){t&1&&_(0,An,0,0,"ng-template")}function wn(t,r){}function Ln(t,r){t&1&&_(0,wn,0,0,"ng-template")}function kn(t,r){}function Dn(t,r){t&1&&_(0,kn,0,0,"ng-template")}function Bn(t,r){if(t&1&&(l(0,"div",24),s(1,"async"),l(2,"div",25),s(3,"async"),_(4,In,1,0,null,26)(5,En,1,0,null,26),s(6,"async"),u(),l(7,"div",27),s(8,"async"),_(9,Ln,1,0,null,14)(10,Dn,1,0,null,14),u()()),t&2){let n=r.ngIf,e=d(),i=w(35),o=w(37),m=w(39),h=w(43);k("tablet-mobile",c(1,12,e.breakpoint$)!==e.BREAKPOINT.md),a(2),k("mobile",c(3,14,e.breakpoint$)===e.BREAKPOINT.xs),a(2),p("ngTemplateOutlet",h)("ngTemplateOutletContext",Z(20,vn,n)),a(),p("ngTemplateOutlet",o)("ngTemplateOutletContext",Z(22,xn,c(6,16,e.customerSearchPage$))),a(2),k("mobile",c(8,18,e.breakpoint$)===e.BREAKPOINT.xs),a(2),p("ngTemplateOutlet",m),a(),p("ngTemplateOutlet",i)}}function Fn(t,r){t&1&&(l(0,"div",28),g(1),s(2,"cxTranslate"),u()),t&2&&(a(),S(" ",c(2,1,"asm.customerList.noLists")," "))}function Mn(t,r){t&1&&(l(0,"div",28),g(1),s(2,"cxTranslate"),u()),t&2&&(a(),S(" ",c(2,1,"asm.customerList.listsError")," "))}function Rn(t,r){t&1&&(l(0,"div",28),g(1),s(2,"cxTranslate"),u()),t&2&&(a(),S(" ",c(2,1,"generalErrors.pageFailure")," "))}function Vn(t,r){t&1&&b(0,"cx-spinner")}function Nn(t,r){t&1&&(I(0),g(1),s(2,"cxTranslate"),A()),t&2&&(a(),S(" ",c(2,1,"asm.customerList.tableHeader.customerName")," "))}function Pn(t,r){t&1&&(I(0),g(1),s(2,"cxTranslate"),A()),t&2&&(a(),S(" ",c(2,1,"asm.customerList.tableHeader.emailId")," "))}function On(t,r){if(t&1&&(I(0),g(1),s(2,"cxTranslate"),A()),t&2){let n=d(2).$implicit;a(),S(" ",c(2,1,n.headerLocalizationKey)," ")}}function $n(t,r){if(t&1&&(l(0,"span"),_(1,Nn,3,3,"ng-container",20)(2,Pn,3,3,"ng-container",20)(3,On,3,3,"ng-container",20),u()),t&2){let n=d().$implicit;a(),p("ngIf",n.headerLocalizationKey==="asm.customerList.tableHeader.customer"),a(),p("ngIf",n.headerLocalizationKey==="asm.customerList.tableHeader.email"),a(),p("ngIf",n.headerLocalizationKey!=="asm.customerList.tableHeader.customer"&&n.headerLocalizationKey!=="asm.customerList.tableHeader.email")}}function Un(t,r){if(t&1&&(l(0,"th",36),_(1,$n,4,3,"span",20),u()),t&2){let n=r.$implicit;a(),p("ngIf",n.headerLocalizationKey&&n.headerLocalizationKey!=="hideHeaders")}}function jn(t,r){if(t&1&&(l(0,"thead")(1,"tr",34),_(2,Un,2,1,"th",35),u()()),t&2){let n=d(3);a(2),p("ngForOf",n.customerListConfig==null?null:n.customerListConfig.columns)}}function zn(t,r){}function Gn(t,r){t&1&&_(0,zn,0,0,"ng-template")}function Hn(t,r){if(t&1&&(l(0,"td",39),_(1,Gn,1,0,null,26),u()),t&2){let n=r.$implicit,e=d(2).$implicit;d(3);let i=w(31);a(),p("ngTemplateOutlet",i)("ngTemplateOutletContext",Y(2,Sn,e,n))}}function Qn(t,r){if(t&1&&(I(0),_(1,Hn,2,5,"td",38),A()),t&2){let n=d(4);a(),p("ngForOf",n.customerListConfig==null?null:n.customerListConfig.columns)}}function Kn(t,r){}function qn(t,r){t&1&&_(0,Kn,0,0,"ng-template")}function Wn(t,r){if(t&1&&(I(0),_(1,qn,1,0,null,26),A()),t&2){let n=d().$implicit,e=d(2).$implicit;d(3);let i=w(31);a(),p("ngTemplateOutlet",i)("ngTemplateOutletContext",Y(2,et,e,n))}}function Yn(t,r){if(t&1&&(I(0),_(1,Wn,2,5,"ng-container",20),A()),t&2){let n=r.even;a(),p("ngIf",n)}}function Jn(t,r){}function Zn(t,r){t&1&&_(0,Jn,0,0,"ng-template")}function Xn(t,r){if(t&1&&(I(0),_(1,Zn,1,0,null,26),A()),t&2){let n=d().$implicit,e=d(2).$implicit;d(3);let i=w(31);a(),p("ngTemplateOutlet",i)("ngTemplateOutletContext",Y(2,et,e,n))}}function er(t,r){if(t&1&&(I(0),_(1,Xn,2,5,"ng-container",20),A()),t&2){let n=r.odd;a(),p("ngIf",n)}}function tr(t,r){if(t&1&&(I(0),l(1,"td",40),_(2,Yn,2,1,"ng-container",41),u(),l(3,"td",40),_(4,er,2,1,"ng-container",41),u(),A()),t&2){let n=d(4);a(2),p("ngForOf",n.customerListConfig==null?null:n.customerListConfig.columns),a(2),p("ngForOf",n.customerListConfig==null?null:n.customerListConfig.columns)}}function ir(t,r){}function nr(t,r){t&1&&_(0,ir,0,0,"ng-template")}function rr(t,r){if(t&1&&(I(0),_(1,nr,1,0,null,26),A()),t&2){let n=r.$implicit,e=d(2).$implicit;d(3);let i=w(31);a(),p("ngTemplateOutlet",i)("ngTemplateOutletContext",Y(2,et,e,n))}}function or(t,r){if(t&1&&(l(0,"td",40),_(1,rr,2,5,"ng-container",41),u()),t&2){let n=d(4);a(),p("ngForOf",n.customerListConfig==null?null:n.customerListConfig.columns)}}function ar(t,r){if(t&1&&(l(0,"tr",34),_(1,Qn,2,1,"ng-container",20),s(2,"async"),_(3,tr,5,2,"ng-container",20),s(4,"async"),_(5,or,2,1,"td",37),s(6,"async"),u()),t&2){let n=d(3);a(),p("ngIf",c(2,3,n.breakpoint$)===n.BREAKPOINT.md),a(2),p("ngIf",c(4,5,n.breakpoint$)===n.BREAKPOINT.sm),a(2),p("ngIf",c(6,7,n.breakpoint$)===n.BREAKPOINT.xs)}}function sr(t,r){if(t&1&&(l(0,"table",31)(1,"caption",32),g(2),s(3,"cxTranslate"),u(),_(4,jn,3,1,"thead",20),s(5,"async"),l(6,"tbody"),_(7,ar,7,9,"tr",33),u()()),t&2){let n=d().ngIf,e=d();a(2),S(" ",c(3,3,"asm.customerList.title")," "),a(2),p("ngIf",c(5,5,e.breakpoint$)===e.BREAKPOINT.md),a(3),p("ngForOf",n==null?null:n.entries)}}function cr(t,r){t&1&&(l(0,"div",42),g(1),s(2,"cxTranslate"),u()),t&2&&(a(),S(" ",c(2,1,"asm.customerList.noCustomers")," "))}function lr(t,r){if(t&1&&(l(0,"div"),_(1,sr,8,7,"table",29)(2,cr,3,3,"div",30),u()),t&2){let n=r.ngIf,e=d();a(),p("ngIf",e.loaded),a(),p("ngIf",!(n!=null&&n.entries.length))}}function mr(t,r){if(t&1){let n=y();l(0,"div")(1,"cx-pagination",44),v("viewPageEvent",function(i){C(n);let o=d(2);return f(o.changePage(i))}),u()()}if(t&2){let n=r.ngIf;a(),p("pagination",n.pagination)}}function pr(t,r){if(t&1&&(l(0,"div",43),s(1,"async"),l(2,"div",27),s(3,"async"),_(4,mr,2,1,"div",20),s(5,"async"),u()()),t&2){let n=d();k("asm-mobile-pagination",c(1,5,n.breakpoint$)!==n.BREAKPOINT.md),a(2),k("mobile",c(3,7,n.breakpoint$)===n.BREAKPOINT.xs),a(2),p("ngIf",c(5,9,n.customerSearchPage$))}}function ur(t,r){if(t&1&&(l(0,"span",50),g(1),s(2,"cxTranslate"),u()),t&2){let n=d(2).column;a(),S(" ",c(2,1,n.headerLocalizationKey)," ")}}function dr(t,r){t&1&&Oe(0)}function _r(t,r){if(t&1&&(I(0),_(1,dr,1,0,"ng-container",26),A()),t&2){let n=d(2),e=n.customerEntry,i=n.column;d();let o=w(33);a(),p("ngTemplateOutlet",o)("ngTemplateOutletContext",Y(2,xi,i,e))}}function gr(t,r){if(t&1&&(b(0,"img",54),s(1,"cxTranslate")),t&2){let n=d(3).customerEntry,e=d();F("alt",c(1,2,"asm.mainLogoLabel")),T("src",(e.occConfig==null||e.occConfig.backend==null||e.occConfig.backend.occ==null?null:e.occConfig.backend.occ.baseUrl)+(n==null||n.userAvatar==null?null:n.userAvatar.url),dt)}}function Cr(t,r){if(t&1&&(l(0,"div",55),g(1),u()),t&2){let n=d(3).customerEntry,e=d();a(),S(" ",e.getBadgeText(n)," ")}}function fr(t,r){if(t&1&&(l(0,"div",51),_(1,gr,2,4,"img",52)(2,Cr,2,1,"div",53),u()),t&2){let n=d(2).customerEntry;a(),p("ngIf",n==null||n.userAvatar==null?null:n.userAvatar.url),a(),p("ngIf",!(!(n==null||n.userAvatar==null)&&n.userAvatar.url))}}function hr(t,r){t&1&&Oe(0)}function vr(t,r){if(t&1){let n=y();l(0,"button",56),s(1,"cxTranslate"),s(2,"cxTranslate"),v("click",function(){C(n);let i=d(2),o=i.customerEntry,m=i.column,h=d();return f(h.startColumnAction(o,m.actionType))}),_(3,hr,1,0,"ng-container",26),u()}if(t&2){let n,e,i=d(2),o=i.customerEntry,m=i.column,h=d(),E=w(33);gt(m.actionType==="ACTIVE_CART"?"cx-cart":""),p("disabled",h.isRequired(o,m.actionType)),T("title",m.icon?c(1,7,(n=m.icon.captionLocalizationKey)!==null&&n!==void 0?n:m.headerLocalizationKey):void 0)("aria-label",m.icon?c(2,9,(e=m.icon.captionLocalizationKey)!==null&&e!==void 0?e:m.headerLocalizationKey):void 0),a(3),p("ngTemplateOutlet",E)("ngTemplateOutletContext",Y(11,xi,m,o))}}function xr(t,r){if(t&1&&(l(0,"div",46),_(1,ur,3,3,"span",47)(2,_r,2,5,"ng-container",20)(3,fr,3,2,"div",48)(4,vr,4,14,"button",49),u()),t&2){let n=d(),e=n.column,i=n.showHeader,o=d();a(),p("ngIf",i),a(),p("ngIf",!e.actionType),a(),p("ngIf",(o.customerListConfig==null?null:o.customerListConfig.showAvatar)&&(e==null?null:e.actionType)===(o.customerListColumnActionType==null?null:o.customerListColumnActionType.START_SESSION)),a(),p("ngIf",e.actionType)}}function Sr(t,r){if(t&1&&_(0,xr,5,4,"div",45),t&2){let n=r.column;p("ngIf",n.headerLocalizationKey!=="hideHeaders")}}function br(t,r){if(t&1&&(l(0,"span"),g(1),u()),t&2){let n=d(),e=n.customerEntry,i=n.column;a(),L((i.renderer==null?null:i.renderer(e))||"")}}function yr(t,r){if(t&1&&(b(0,"cx-icon",58),s(1,"cxTranslate"),s(2,"cxTranslate")),t&2){let n,e,i=d(),o=i.customerEntry,m=i.column,h=d();k("cx-action-color",m.actionType&&!h.isRequired(o,m.actionType)),p("type",m.icon.symbol),T("title",m.actionType?void 0:c(1,5,(n=m.icon.captionLocalizationKey)!==null&&n!==void 0?n:m.headerLocalizationKey))("aria-label",m.actionType?void 0:c(2,7,(e=m.icon.captionLocalizationKey)!==null&&e!==void 0?e:m.headerLocalizationKey))}}function Tr(t,r){if(t&1&&(l(0,"div"),_(1,br,2,1,"span",20)(2,yr,3,9,"cx-icon",57),u()),t&2){let n=r.column;a(),p("ngIf",!n.icon),a(),p("ngIf",n.icon)}}function Ir(t,r){if(t&1){let n=y();l(0,"div",59)(1,"input",60),s(2,"cxTranslate"),s(3,"cxTranslate"),v("keyup",function(i){C(n);let o=d();return f(o.onKey(i))}),u(),l(4,"cx-icon",61),s(5,"cxTranslate"),v("click",function(){C(n);let i=d();return f(i.searchCustomers())}),u()()}if(t&2){let n=d();a(),F("placeholder",c(2,5,"asm.customerList.searchBox")),p("formControl",n.searchBox),T("aria-label",c(3,7,"asm.customerList.enterSearchBox")),a(3),p("type",n.iconTypes.SEARCH),T("aria-label",c(5,9,"storeFinder.searchNearestStores"))}}function Ar(t,r){if(t&1&&(I(0),g(1),s(2,"cxTranslate"),A()),t&2){let n=d(2).customerSearchPage;a(),S(" ",Te(2,1,"asm.customerList.noOfCustomers",Z(4,Si,n==null||n.pagination==null?null:n.pagination.totalResults))," ")}}function Er(t,r){t&1&&(I(0),g(1),s(2,"cxTranslate"),A()),t&2&&(a(),S(" ",c(2,1,"asm.customerList.oneCustomer")," "))}function wr(t,r){if(t&1&&(l(0,"span",63),_(1,Ar,3,6,"ng-container",20)(2,Er,3,3,"ng-container",20),u()),t&2){let n=d().customerSearchPage;a(),p("ngIf",(n==null||n.pagination==null?null:n.pagination.totalResults)>1),a(),p("ngIf",(n==null||n.pagination==null?null:n.pagination.totalResults)===1)}}function Lr(t,r){if(t&1&&_(0,wr,3,2,"span",62),t&2){let n=r.customerSearchPage;p("ngIf",n==null||n.pagination==null?null:n.pagination.totalResults)}}function kr(t,r){if(t&1){let n=y();l(0,"label")(1,"span",32),g(2),s(3,"cxTranslate"),u(),l(4,"cx-sorting",64),s(5,"cxTranslate"),s(6,"async"),v("sortListEvent",function(i){C(n);let o=d();return f(o.changeSortCode(i))}),u()()}if(t&2){let n=d();a(2),L(c(3,6,"asm.customerList.tableSort.sortBy")),a(2),F("placeholder",c(5,8,"asm.customerList.tableSort.sortBy")),p("sortOptions",n.sorts)("sortLabels",c(6,10,n.getSortLabels()))("selectedOption",n.sortCode)("cxNgSelectA11y",Z(12,bi,n.sortCode))}}function Dr(t,r){if(t&1){let n=y();l(0,"button",68),v("click",function(){C(n);let i=d(2);return f(i.goToPreviousPage())}),b(1,"cx-icon",69),l(2,"span"),g(3),s(4,"cxTranslate"),u()()}if(t&2){let n=d(2);p("disabled",n.currentPage===0||!n.loaded),a(),p("type",n.iconTypes.CARET_LEFT),a(2),L(c(4,3,"asm.customerList.page.previous"))}}function Br(t,r){if(t&1){let n=y();l(0,"button",70),v("click",function(){C(n);let i=d(2);return f(i.goToNextPage())}),l(1,"span"),g(2),s(3,"cxTranslate"),u(),b(4,"cx-icon",71),u()}if(t&2){let n=d(2);p("disabled",n.currentPage===n.maxPage||!n.loaded),a(2),L(c(3,3,"asm.customerList.page.next")),a(2),p("type",n.iconTypes.CARET_RIGHT)}}function Fr(t,r){if(t&1&&(l(0,"div",65)(1,"div"),g(2),s(3,"cxTranslate"),u(),_(4,Dr,5,5,"button",66)(5,Br,5,5,"button",67),u()),t&2){let n=d();a(2),S(" ",Te(3,3,"asm.customerList.page.page",Z(6,Si,n.currentPage+1))," "),a(2),p("ngIf",n.maxPage>0),a(),p("ngIf",n.maxPage>0)}}function Mr(t,r){if(t&1){let n=y();l(0,"label")(1,"span",32),g(2),s(3,"cxTranslate"),u(),l(4,"ng-select",72),v("change",function(){C(n);let i=d();return f(i.onChangeCustomerGroup())}),vt("ngModelChange",function(i){C(n);let o=d();return ht(o.selectedUserGroupId,i)||(o.selectedUserGroupId=i),f(i)}),u()()}if(t&2){let n=r.customerListsPage,e=d();a(2),L(c(3,7,"asm.customerList.title")),a(2),p("searchable",!1)("clearable",!1)("tabIndex",0),ft("ngModel",e.selectedUserGroupId),p("items",n==null?null:n.userGroups)("cxNgSelectA11y",Z(9,bi,e.getGroupName(n,e.selectedUserGroupId)))}}function Rr(t,r){if(t&1){let n=y();l(0,"button",73),s(1,"cxTranslate"),v("click",function(){C(n);let i=d();return f(i.closeModal("Cross click"))}),l(2,"span",74),b(3,"cx-icon",58),u()()}if(t&2){let n=d();T("aria-label",c(1,2,"common.close")),a(3),p("type",n.iconTypes.CLOSE)}}function Vr(t,r){if(t&1){let n=y();l(0,"button",75),v("click",function(){C(n);let i=d();return f(i.createCustomer())}),b(1,"cx-icon",58),l(2,"span"),g(3),s(4,"cxTranslate"),u()()}if(t&2){let n=d();a(),p("type",n.iconTypes.USER_PLUS),a(2),L(c(4,2,"asm.customerList.createCustomer"))}}var Me=function(t){return t.CANCEL="CANCEL",t.REPLACE="REPLACE",t}(Me||{}),Nr=(()=>{let r=class r{constructor(e){this.launchDialogService=e,this.BIND_CART_ACTION=Me,this.focusConfig={trap:!0,block:!0,autofocus:!0,focusOnEscape:!0}}closeModal(e){this.launchDialogService.closeDialog(e)}};r.\u0275fac=function(i){return new(i||r)(x(G))},r.\u0275cmp=B({type:r,selectors:[["cx-asm-bind-cart-dialog"]],decls:20,vars:19,consts:[[1,"cx-asm-bind-cart-dialog","cx-modal-container","cx-asm-dialog",3,"esc","cxFocus"],[1,"cx-modal-content"],[1,"cx-dialog-header","modal-header"],["id","asm-bind-cart-dialog-title",1,"title","modal-title"],[1,"cx-dialog-body","modal-body"],[1,"cx-dialog-row"],[1,"cx-dialog-item"],[1,"cx-dialog-footer","modal-footer"],["type","button",1,"btn","btn-primary",3,"click"],["type","button",1,"btn","btn-secondary",3,"click"]],template:function(i,o){i&1&&(l(0,"div",0),v("esc",function(){return o.closeModal(o.BIND_CART_ACTION.CANCEL)}),l(1,"div",1)(2,"div",2)(3,"h2",3),g(4),s(5,"cxTranslate"),u()(),l(6,"div",4)(7,"div",5)(8,"div",6),g(9),s(10,"cxTranslate"),u()()(),l(11,"div",7)(12,"button",8),s(13,"cxTranslate"),v("click",function(){return o.closeModal(o.BIND_CART_ACTION.REPLACE)}),g(14),s(15,"cxTranslate"),u(),l(16,"button",9),s(17,"cxTranslate"),v("click",function(){return o.closeModal(o.BIND_CART_ACTION.CANCEL)}),g(18),s(19,"cxTranslate"),u()()()()),i&2&&(p("cxFocus",o.focusConfig),a(4),S(" ",c(5,7,"asm.bindCart.dialog.title")," "),a(5),S(" ",c(10,9,"asm.bindCart.dialog.body")," "),a(3),T("aria-label",c(13,11,"asm.bindCart.dialog.actions.replace")),a(2),S(" ",c(15,13,"asm.bindCart.dialog.actions.replace")," "),a(2),T("aria-label",c(17,15,"common.cancel")),a(2),S(" ",c(19,17,"common.cancel")," "))},dependencies:[oe,R],encapsulation:2});let t=r;return t})(),Re=function(t){return t.CANCEL="CANCEL",t.SAVE="SAVE",t}(Re||{}),Pr=(()=>{let r=class r{constructor(e,i){this.launchDialogService=e,this.savedCartFacade=i,this.BIND_CART_ACTION=Re,this.showDialogAlert$=new H(!0),this.globalMessageType=Q,this.focusConfig={trap:!0,block:!0,autofocus:!0,focusOnEscape:!0}}ngOnInit(){this.launchDialogService.data$.pipe(V(1)).subscribe(e=>{this.cart=e,this.setCartTotalQty()})}setCartTotalQty(){let e=0;if(this.cart.entries)for(let i of this.cart.entries)e+=i.quantity?i.quantity:0;this.cartQty=e}closeDialogAlert(){this.showDialogAlert$.next(!1)}closeModal(e){e===Re.SAVE&&this.saveCart(),this.launchDialogService.closeDialog(e)}saveCart(){this.savedCartFacade.saveCart({cartId:this.cart.code,saveCartName:this.cart.code,saveCartDescription:"-"})}};r.\u0275fac=function(i){return new(i||r)(x(G),x(Je))},r.\u0275cmp=B({type:r,selectors:[["cx-asm-save-cart-dialog"]],decls:38,vars:31,consts:[["showSaveCartWarning",""],[1,"cx-asm-save-cart-dialog","cx-modal-container","cx-asm-dialog",3,"esc","cxFocus"],[1,"cx-modal-content"],[1,"cx-dialog-header","modal-header"],["id","asm-save-cart-dialog-title",1,"title","modal-title"],[1,"cx-dialog-body","modal-body"],[4,"ngIf","ngIfElse"],[1,"cx-dialog-content"],[1,"cx-dialog-row","row"],[1,"cx-dialog-item","col-sm-6","col-md-6","text-right","item-left-text"],[1,"cx-dialog-item","col-sm-6","col-md-6","text-left","item-right-text"],[1,"cx-dialog-footer","modal-footer"],["id","asm-save-cart-dialog-btn","type","button",1,"btn","btn-primary",3,"click","disabled"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"message-container"],[3,"text","type","closeMessage",4,"ngIf"],[3,"closeMessage","text","type"]],template:function(i,o){if(i&1){let m=y();l(0,"div",1),v("esc",function(){return C(m),f(o.closeModal(o.BIND_CART_ACTION.CANCEL))}),l(1,"div",2)(2,"div",3)(3,"h2",4),g(4),s(5,"cxTranslate"),u()(),l(6,"div",5),_(7,wi,4,3,"ng-container",6)(8,ki,3,3,"ng-template",null,0,M),l(10,"div",7)(11,"div",8)(12,"div",9),g(13),s(14,"cxTranslate"),u(),l(15,"div",10),g(16),u()(),l(17,"div",8)(18,"div",9),g(19),s(20,"cxTranslate"),u(),l(21,"div",10),g(22),u()(),l(23,"div",8)(24,"div",9),g(25),s(26,"cxTranslate"),u(),l(27,"div",10),g(28),u()()()(),l(29,"div",11)(30,"button",12),s(31,"cxTranslate"),v("click",function(){return C(m),f(o.closeModal(o.BIND_CART_ACTION.SAVE))}),g(32),s(33,"cxTranslate"),u(),l(34,"button",13),s(35,"cxTranslate"),v("click",function(){return C(m),f(o.closeModal(o.BIND_CART_ACTION.CANCEL))}),g(36),s(37,"cxTranslate"),u()()()()}if(i&2){let m=w(9);p("cxFocus",o.focusConfig),a(4),S(" ",c(5,15,"asm.saveCart.dialog.title")," "),a(3),p("ngIf",o.cartQty>0)("ngIfElse",m),a(6),S(" ",c(14,17,"asm.saveCart.dialog.row.id")," "),a(3),S(" ",o.cart.code," "),a(3),S(" ",c(20,19,"asm.saveCart.dialog.row.qty")," "),a(3),S(" ",o.cartQty," "),a(3),S(" ",c(26,21,"asm.saveCart.dialog.row.total")," "),a(3),S(" ",o.cart.totalPriceWithTax==null?null:o.cart.totalPriceWithTax.formattedValue," "),a(2),p("disabled",o.cartQty===0),T("aria-label",c(31,23,"asm.saveCart.dialog.actions.save")),a(2),S(" ",c(33,25,"asm.saveCart.dialog.actions.save")," "),a(2),T("aria-label",c(35,27,"common.cancel")),a(2),S(" ",c(37,29,"common.cancel")," ")}},dependencies:[j,oe,Be,J,R],encapsulation:2});let t=r;return t})(),he=(()=>{let r=class r{constructor(e,i,o,m,h){this.authService=e,this.csAgentAuthService=i,this.winRef=o,this.asmEnablerService=m,this.asmDeepLinkService=h,this.isEmulatedByDeepLink$=new H(!1),this.showDeeplinkCartInfoAlert$=new H(!1),this.routingService=ye(ie)}getSearchParameter(e){return this.asmDeepLinkService?.getSearchParameter(e)}isEmulatedByDeepLink(){return this.isEmulatedByDeepLink$}setEmulatedByDeepLink(e){this.isEmulatedByDeepLink$.next(e)}setShowDeeplinkCartInfoAlert(e){this.showDeeplinkCartInfoAlert$.next(e)}shouldShowDeeplinkCartInfoAlert(){return this.showDeeplinkCartInfoAlert$}logoutCustomerSupportAgentAndCustomer(){this.csAgentAuthService.logoutCustomerSupportAgent()}logoutCustomer(){this.authService.logout()}isCustomerEmulationSessionInProgress(){return this.csAgentAuthService.isCustomerEmulated()}unload(){this.winRef.localStorage&&this.winRef.localStorage.removeItem(si)}isEmulateInURL(){return this.asmDeepLinkService?.isEmulateInURL()||!1}getDeepLinkUrlParams(){return this.asmDeepLinkService?.getParamsInUrl()}handleDeepLinkNavigation(e=this.getDeepLinkUrlParams()){this.asmDeepLinkService?.handleNavigation(e)}handleAsmDialogAction(e){typeof e=="object"&&e.actionType===di.NAVIGATE&&this.routingService.go(e.route)}};r.\u0275fac=function(i){return new(i||r)(P(Ue),P(Ze),P(Et),P(ci),P(ui))},r.\u0275prov=be({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})(),tt=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275cmp=B({type:r,selectors:[["cx-dot-spinner"]],decls:3,vars:0,template:function(i,o){i&1&&b(0,"div")(1,"div")(2,"div")},encapsulation:2,changeDetection:0});let t=r;return t})(),Or=(()=>{let r=class r{constructor(e,i,o,m,h,E,le,me){this.globalMessageService=e,this.activeCartFacade=i,this.multiCartFacade=o,this.asmBindCartFacade=m,this.launchDialogService=h,this.savedCartFacade=E,this.asmComponentService=le,this.routing=me,this.activeCartValidator=X=>X.value===this.activeCartId?{activeCartError:!0}:(this.deepLinkCartId&&X.value!==this.deepLinkCartId&&this.resetDeeplinkCart(),null),this.cartId=new Rt("",[K.required,K.minLength(1),this.activeCartValidator]),this.loading$=new H(!1),this.valid$=this.cartId.statusChanges.pipe(W(X=>X==="VALID"),mt(1)),this.activeCartId="",this.deepLinkCartId="",this.displayBindCartBtn$=new H(!0),this.displaySaveCartBtn$=new H(!1),this.subscription=new q}ngOnInit(){this.subscribeForDeeplinkCart(),this.subscription.add(this.activeCartFacade.getActiveCartId().subscribe(e=>{this.activeCartId=e??"",this.cartId.setValue(this.deepLinkCartId||this.activeCartId)}))}resetInput(){this.cartId.value||this.cartId.setValue(this.activeCartId)}bindCartToCustomer(){let e=this.cartId.value,i=ve([this.loading$.asObservable(),this.valid$]).pipe(V(1),D(([o,m])=>!o&&m),N(()=>this.loading$.next(!0)),xe(()=>this.activeCartFacade.getActive().pipe(W(o=>o.deliveryItemsQuantity??0),V(1))),xe(o=>ot(()=>!!(this.activeCartId&&o),this.openDialog(this.activeCartId,e),this.simpleBindCart(e))),ct(()=>this.loading$.next(!1))).subscribe({next:()=>{this.globalMessageService.add({key:"asm.bindCart.success"},Q.MSG_TYPE_CONFIRMATION)},error:o=>{this.globalMessageService.add(o.details?.[0].message??"",Q.MSG_TYPE_ERROR)}});this.subscription.add(i)}onSaveInactiveCart(){this.asmComponentService?.setShowDeeplinkCartInfoAlert(!1);let e=this.asmComponentService?.getSearchParameter("customerId");this.multiCartFacade.loadCart({cartId:this.deepLinkCartId,userId:e}),this.multiCartFacade.getCartEntity(this.deepLinkCartId).pipe(D(i=>i.loading===!1&&i.success===!0),V(1),W(i=>i.value),D(i=>!!i)).subscribe(i=>{this.openASMSaveCartDialog(i)}),this.afterCloseASMSaveCartDialog()}clearText(){this.cartId.setValue(""),this.resetDeeplinkCart()}resetDeeplinkCart(){this.deepLinkCartId="",this.displayBindCartBtn$.next(!0),this.displaySaveCartBtn$.next(!1),this.asmComponentService?.setShowDeeplinkCartInfoAlert(!1)}ngOnDestroy(){this.subscription.unsubscribe()}simpleBindCart(e){return Ne(()=>this.asmBindCartFacade.bindCart(e)).pipe(N(()=>this.multiCartFacade.reloadCart(Tt)))}openDialog(e,i){return Ne(()=>(this.launchDialogService.openDialogAndSubscribe("ASM_BIND_CART",this.bindToCartElemRef),this.launchDialogService.dialogClose.pipe(D(o=>!!o),V(1)))).pipe(D(o=>!!o),xe(o=>this.selectBindAction(e,i,o)))}selectBindAction(e,i,o){switch(o){case Me.REPLACE:return this.replaceCart(e,i);case Me.CANCEL:default:return nt}}replaceCart(e,i){return this.simpleBindCart(i).pipe(N(()=>{this.savedCartFacade.saveCart({cartId:e,saveCartName:e,saveCartDescription:"-"})}))}subscribeForDeeplinkCart(){this.subscription.add(this.asmComponentService?.isEmulatedByDeepLink().pipe(D(e=>e&&!!this.asmComponentService?.getSearchParameter("cartId"))).subscribe(()=>{let e=this.asmComponentService?.getSearchParameter("cartType");(e==="inactive"||e==="active")&&(this.displayBindCartBtn$.next(!1),this.displaySaveCartBtn$.next(e==="inactive"),this.deepLinkCartId=this.asmComponentService?.getSearchParameter("cartId"),this.cartId.setValue(this.deepLinkCartId),this.asmComponentService?.setShowDeeplinkCartInfoAlert(!0),this.asmComponentService?.handleDeepLinkNavigation())}))}openASMSaveCartDialog(e){this.launchDialogService.openDialogAndSubscribe("ASM_SAVE_CART",this.saveInactiveCartElemRef,e)}afterCloseASMSaveCartDialog(){this.launchDialogService.dialogClose.pipe(D(e=>e===Re.SAVE),V(1),N(()=>this.loading$.next(!0))).subscribe(),this.savedCartFacade.getSaveCartProcessSuccess().pipe(D(e=>e),V(1),N(()=>this.loading$.next(!1))).subscribe(()=>{this.goToSavedCartDetails(this.deepLinkCartId),this.displaySaveCartBtn$.next(!1)}),this.savedCartFacade.getSaveCartProcessError().pipe(D(e=>e),V(1),N(()=>this.loading$.next(!1))).subscribe()}goToSavedCartDetails(e){this.routing?.go({cxRoute:"savedCartsDetails",params:{savedCartId:e}})}};r.\u0275fac=function(i){return new(i||r)(x(Ge),x(ai),x(oi),x(li),x(G),x(Je),x(he),x(ie))},r.\u0275cmp=B({type:r,selectors:[["cx-asm-bind-cart"]],viewQuery:function(i,o){if(i&1&&(O(Di,5),O(Bi,5)),i&2){let m;$(m=U())&&(o.bindToCartElemRef=m.first),$(m=U())&&(o.saveInactiveCartElemRef=m.first)}},decls:17,vars:25,consts:[["cartIdElement",""],["bindToCart",""],["saveInactiveCart",""],["for","cartNumber"],["role","search",1,"cx-asm-assignCart",3,"click"],["autocomplete","off","formcontrolname","cartNumber",3,"keydown.enter","blur","formControl"],[1,"cx-asm-reset",3,"click"],[1,"cx-icon","fas","fa-times-circle"],["class","cx-asm-bindCartToCustomer","type","submit",3,"disabled","cx-asm-active","cx-bind-loading","click",4,"ngIf"],["id","asm-save-inactive-cart-btn","class","cx-asm-bindCartToCustomer cx-asm-active","type","submit",3,"cx-bind-loading","click",4,"ngIf"],["type","submit",1,"cx-asm-bindCartToCustomer",3,"click","disabled"],["id","asm-save-inactive-cart-btn","type","submit",1,"cx-asm-bindCartToCustomer","cx-asm-active",3,"click"]],template:function(i,o){if(i&1){let m=y();l(0,"form")(1,"label",3),g(2),s(3,"cxTranslate"),u(),l(4,"div",4),s(5,"async"),s(6,"cxTranslate"),v("click",function(){C(m);let E=w(8);return f(E.focus())}),l(7,"input",5,0),s(9,"cxTranslate"),v("keydown.enter",function(){return C(m),f(o.bindCartToCustomer())})("blur",function(){return C(m),f(o.resetInput())}),u(),l(10,"button",6),s(11,"cxTranslate"),v("click",function(){return C(m),f(o.clearText())}),b(12,"cx-icon",7),u()(),_(13,Fi,12,23,"button",8),s(14,"async"),_(15,Mi,10,16,"button",9),s(16,"async"),u()}i&2&&(a(2),S("",c(3,11,"asm.bindCart.cartNumber")," "),a(2),k("active",c(5,13,o.valid$)),T("aria-label",c(6,15,"asm.bindCart.assignCartId")),a(3),p("formControl",o.cartId),T("aria-label",c(9,17,"asm.bindCart.enterCartId")),a(3),k("visible",(o.cartId.value==null?null:o.cartId.value.length)>0),T("aria-label",c(11,19,"asm.bindCart.resetCartId")),a(3),p("ngIf",c(14,21,o.displayBindCartBtn$)),a(2),p("ngIf",c(16,23,o.displaySaveCartBtn$)))},dependencies:[j,ge,ne,re,_e,Qe,fe,Mt,tt,J,R],encapsulation:2,changeDetection:0});let t=r;return t})(),$r=(()=>{let r=class r{constructor(e,i,o,m){this.launchDialogService=e,this.fb=i,this.asmCreateCustomerFacade=o,this.translationService=m,this.iconTypes=ke,this.isLoading$=new H(!1),this.showDialogInfoAlert=!0,this.globalMessageType=Q,this.focusConfig={trap:!0,block:!0,autofocus:!0,focusOnEscape:!0},this.registerForm=this.fb.group({firstName:["",K.required],lastName:["",K.required],email:["",[K.required,ri.emailValidator]]})}submitForm(){this.registerForm.valid?this.registerUser():this.registerForm.markAllAsTouched()}registerUser(){this.isLoading$.next(!0);let{firstName:e,lastName:i,email:o}=this.registerForm.value;this.createdCustomer={firstName:e??"",lastName:i??"",email:o??""};let m=this.asmCreateCustomerFacade.createCustomer(this.collectDataFromRegisterForm());m.subscribe({next:h=>this.onRegisterUserSuccess(h),error:h=>this.onRegisterUserFail(h)}),m.subscribe({complete:()=>this.isLoading$.next(!1)})}collectDataFromRegisterForm(){return{firstName:this.createdCustomer.firstName,lastName:this.createdCustomer.lastName,emailAddress:this.createdCustomer.email}}closeModal(e){this.launchDialogService.closeDialog(e)}closeDialogInfoAlert(){this.showDialogInfoAlert=!1}closeDialogBackendErroAlert(e){this.showDialogBackendErrorAlerts[e]=!1}onRegisterUserSuccess(e){this.launchDialogService.closeDialog(e)}onRegisterUserFail(e){this.isLoading$.next(!1),this.backendErrorMessages=[],this.showDialogBackendErrorAlerts=[];let i="httpHandlers.unknownError",o=e.details??[];o.length===0&&this.addErrorMessage(i),o.forEach(m=>{switch(m.type||""){case"ValidationError":this.addErrorMessage(`asm.createCustomerForm.validationErrors.${m.subject}`);break;case"AssistedServiceDuplicatedUidError":this.addErrorMessage("asm.createCustomerForm.badRequestDuplicatedEmail",{emailAddress:this.createdCustomer.email});break;default:this.addErrorMessage(i)}})}addErrorMessage(e,i){this.translationService.translate(e,i).pipe(lt()).subscribe(o=>{this.backendErrorMessages.push(o),this.showDialogBackendErrorAlerts.push(!0)})}};r.\u0275fac=function(i){return new(i||r)(x(G),x(Pt),x(mi),x(He))},r.\u0275cmp=B({type:r,selectors:[["cx-asm-create-customer-form"]],decls:23,vars:17,consts:[["loading",""],[1,"cx-modal-container","cx-asm-dialog",3,"esc","cxFocus"],[1,"cx-modal-content"],[3,"ngSubmit","formGroup"],[1,"cx-dialog-header","modal-header"],[1,"title","modal-title"],[1,"cx-dialog-body","modal-body"],[1,"message-container"],[3,"text","type","closeMessage",4,"ngIf"],[4,"ngFor","ngForOf"],[4,"ngIf","ngIfElse"],[1,"modal-footer"],["type","submit",1,"btn","cx-asm-create-customer-btn","cx-asm-create-customer-btn-create"],["type","button",1,"btn","cx-asm-create-customer-btn","cx-asm-create-customer-btn-cancel",3,"click"],[3,"closeMessage","text","type"],[1,"form-group"],[1,"label-content"],["required","true","formControlName","firstName","name","text",1,"form-control",3,"placeholder"],[3,"control"],["required","true","name","text","formControlName","lastName",1,"form-control",3,"placeholder"],["required","true","name","email","formControlName","email",1,"form-control",3,"placeholder"],[1,"cx-spinner"]],template:function(i,o){if(i&1){let m=y();l(0,"div",1),v("esc",function(){return C(m),f(o.closeModal("Escape clicked"))}),l(1,"div",2),I(2),l(3,"form",3),v("ngSubmit",function(){return C(m),f(o.submitForm())}),l(4,"div",4)(5,"h2",5),g(6),s(7,"cxTranslate"),u()(),l(8,"div",6)(9,"div",7),_(10,Ri,2,4,"cx-message",8)(11,Ni,2,1,"ng-container",9),u(),_(12,Pi,25,21,"div",10),s(13,"async"),u(),l(14,"div",11)(15,"button",12),g(16),s(17,"cxTranslate"),u(),l(18,"button",13),v("click",function(){return C(m),f(o.closeModal("Cancel click"))}),g(19),s(20,"cxTranslate"),u()()(),A(),u()(),_(21,Oi,2,0,"ng-template",null,0,M)}if(i&2){let m=w(22);p("cxFocus",o.focusConfig),a(3),p("formGroup",o.registerForm),a(3),S(" ",c(7,9,"asm.createCustomerForm.title")," "),a(4),p("ngIf",o.showDialogInfoAlert),a(),p("ngForOf",o.backendErrorMessages),a(),p("ngIf",!c(13,11,o.isLoading$))("ngIfElse",m),a(4),S(" ",c(17,13,"asm.createCustomerForm.createAccount")," "),a(3),S(" ",c(20,15,"asm.createCustomerForm.cancel")," ")}},dependencies:[Ie,j,ge,ne,re,_e,Le,Ee,we,De,We,oe,Be,J,R],encapsulation:2});let t=r;return t})(),Ur={launch:{ASM_CREATE_CUSTOMER_FORM:{inlineRoot:!0,component:$r,dialogType:ae.DIALOG}}},jr=(()=>{let r=class r{constructor(e){this.fb=e,this.csAgentTokenLoading=!1,this.submitEvent=new Pe}ngOnInit(){this.csAgentLoginForm=this.fb.group({userId:["",[K.required]],password:["",[K.required]]})}onSubmit(){this.csAgentLoginForm.valid?this.submitEvent.emit({userId:this.csAgentLoginForm.get("userId")?.value,password:this.csAgentLoginForm.get("password")?.value}):this.csAgentLoginForm.markAllAsTouched()}};r.\u0275fac=function(i){return new(i||r)(x(Ke))},r.\u0275cmp=B({type:r,selectors:[["cx-csagent-login-form"]],inputs:{csAgentTokenLoading:"csAgentTokenLoading"},outputs:{submitEvent:"submitEvent"},decls:2,vars:2,consts:[[3,"formGroup","ngSubmit",4,"ngIf"],["aria-hidden","false",4,"ngIf"],[3,"ngSubmit","formGroup"],["required","true","type","text","formControlName","userId",3,"placeholder"],[3,"control"],["required","true","type","password","formControlName","password","cxPasswordVisibilitySwitch","",3,"placeholder"],["type","submit"],["aria-hidden","false"]],template:function(i,o){i&1&&_(0,$i,14,18,"form",0)(1,Ui,2,3,"cx-dot-spinner",1),i&2&&(p("ngIf",!o.csAgentTokenLoading),a(),p("ngIf",o.csAgentTokenLoading))},dependencies:[j,ge,ne,re,_e,Le,Ee,we,De,qt,tt,R],encapsulation:2});let t=r;return t})(),zr=(()=>{let r=class r{constructor(e,i,o,m,h){this.fb=e,this.asmService=i,this.config=o,this.directionService=m,this.launchDialogService=h,this.subscription=new q,this.submitEvent=new Pe,this.activeFocusedButtonIndex=-1}ngOnInit(){this.customerSelectionForm=this.fb.group({searchTerm:["",K.required]}),this.asmService.customerSearchReset(),this.searchResultsLoading$=this.asmService.getCustomerSearchResultsLoading(),this.searchResults=this.asmService.getCustomerSearchResults(),this.subscription.add(this.customerSelectionForm.controls.searchTerm.valueChanges.pipe(st(300)).subscribe(e=>{this.handleSearchTerm(e)}))}handleSearchTerm(e){this.selectedCustomer&&e!==this.selectedCustomer.name&&(this.selectedCustomer=void 0),!this.selectedCustomer&&(this.asmService.customerSearchReset(),this.activeFocusedButtonIndex=-1,e.trim().length>=3&&this.asmService.customerSearch({query:e,pageSize:this.config.asm?.customerSearch?.maxResults}))}selectCustomerFromList(e,i){this.selectedCustomer=i,this.customerSelectionForm.controls.searchTerm.setValue(this.selectedCustomer.name),this.asmService.customerSearchReset(),this.searchTerm.nativeElement.focus(),e.preventDefault(),e.stopPropagation()}onSubmit(){this.customerSelectionForm.valid&&this.selectedCustomer?this.submitEvent.emit({customerId:this.selectedCustomer.customerId}):this.customerSelectionForm.markAllAsTouched()}onDocumentClick(e){if(this.resultList){if(this.resultList.nativeElement.contains(e.target)||this.searchTerm.nativeElement.contains(e.target))return;this.asmService.customerSearchReset()}}closeResults(e){this.asmService.customerSearchReset(),this.searchTerm.nativeElement.focus(),e.preventDefault(),e.stopPropagation()}ngOnDestroy(){this.subscription.unsubscribe(),this.asmService.customerSearchReset()}focusFirstItem(e){e.preventDefault(),this.activeFocusedButtonIndex=0,this.updateItemIndex(this.activeFocusedButtonIndex)}setSelectionEnd(e){if(e.preventDefault(),this.searchTerm.nativeElement.value?.length){let i=this.searchTerm.nativeElement.value.length;this.searchTerm.nativeElement.selectionStart=i,this.searchTerm.nativeElement.selectionEnd=i}}focusPreviousChild(e){e.preventDefault(),this.activeFocusedButtonIndex--,this.activeFocusedButtonIndex<0&&(this.activeFocusedButtonIndex=this.searchResultItems.length-1),this.updateItemIndex(this.activeFocusedButtonIndex)}focusNextChild(e){e.preventDefault(),this.activeFocusedButtonIndex++,this.activeFocusedButtonIndex>this.searchResultItems.length-1&&(this.activeFocusedButtonIndex=0),this.updateItemIndex(this.activeFocusedButtonIndex)}focusInputText(e){if(e.preventDefault(),this.activeFocusedButtonIndex=-1,this.searchTerm.nativeElement.focus(),this.searchTerm.nativeElement.value?.length){let i=this.searchTerm.nativeElement.selectionEnd,o=this.searchTerm.nativeElement.value.length;this.isBackNavigation(e)?i=i<=0?0:i-1:this.isForwardsNavigation(e)?i=i>=o?o:i+1:e.code==="Home"?i=0:e.code==="End"&&(i=o),this.searchTerm.nativeElement.selectionStart=i,this.searchTerm.nativeElement.selectionEnd=i}}updateItemIndex(e){this.searchResultItems.toArray()?.[e]?.nativeElement.focus()}createCustomer(){this.asmService.customerSearchReset(),this.launchDialogService.openDialogAndSubscribe("ASM_CREATE_CUSTOMER_FORM",this.createCustomerLink)}isForwardsNavigation(e){return e.code==="ArrowRight"&&this.isLTRDirection()||e.code==="ArrowLeft"&&this.isRTLDirection()}isBackNavigation(e){return e.code==="ArrowLeft"&&this.isLTRDirection()||e.code==="ArrowRight"&&this.isRTLDirection()}isLTRDirection(){return this.directionService.getDirection()===qe.LTR}isRTLDirection(){return this.directionService.getDirection()===qe.RTL}};r.\u0275fac=function(i){return new(i||r)(x(Ke),x(Fe),x(se),x(ni),x(G))},r.\u0275cmp=B({type:r,selectors:[["cx-customer-selection"]],viewQuery:function(i,o){if(i&1&&(O(ji,5),O(zi,5),O(Gi,5),O(Hi,5)),i&2){let m;$(m=U())&&(o.resultList=m.first),$(m=U())&&(o.searchTerm=m.first),$(m=U())&&(o.createCustomerLink=m.first),$(m=U())&&(o.searchResultItems=m)}},hostBindings:function(i,o){i&1&&v("click",function(h){return o.onDocumentClick(h)},!1,_t)},outputs:{submitEvent:"submitEvent"},decls:14,vars:19,consts:[["searchTerm",""],["resultList",""],["searchResultItem",""],["createCustomerLink",""],[3,"ngSubmit","formGroup"],["required","true","type","text","formControlName","searchTerm",3,"keydown.arrowdown","keydown.end","placeholder"],[3,"control"],["type","submit"],["class","asm-results",4,"ngIf"],[1,"asm-results"],[3,"tabindex","active","keydown.arrowup","keydown.arrowdown","keydown.arrowright","keydown.arrowleft","keydown.enter","keydown.escape","keydown.home","keydown.end","click",4,"ngFor","ngForOf"],[3,"active","click","keydown.escape","keydown.arrowright","keydown.arrowleft","keydown.home","keydown.end",4,"ngIf"],[3,"keydown.arrowup","keydown.arrowdown","keydown.arrowright","keydown.arrowleft","keydown.enter","keydown.escape","keydown.home","keydown.end","click","tabindex"],[1,"result-name"],[1,"result-id"],[3,"click","keydown.escape","keydown.arrowright","keydown.arrowleft","keydown.home","keydown.end"],[1,"linkStyleLabel"],["aria-hidden","false"]],template:function(i,o){if(i&1){let m=y();l(0,"form",4),v("ngSubmit",function(){return C(m),f(o.onSubmit())}),l(1,"label")(2,"input",5,0),s(4,"cxTranslate"),s(5,"cxTranslate"),v("keydown.arrowdown",function(E){return C(m),f(o.focusFirstItem(E))})("keydown.end",function(E){return C(m),f(o.setSelectionEnd(E))}),u(),b(6,"cx-form-errors",6),u(),l(7,"button",7),g(8),s(9,"cxTranslate"),u()(),_(10,qi,5,4,"div",8),s(11,"async"),_(12,Wi,3,3,"div",8),s(13,"async")}i&2&&(p("formGroup",o.customerSelectionForm),a(2),F("placeholder",c(4,9,"asm.customerSearch.searchTerm.label")),T("aria-label",c(5,11,"asm.customerSearch.searchTerm.label")),a(4),p("control",o.customerSelectionForm.get("searchTerm")),a(),k("active",o.selectedCustomer),a(),S(" ",c(9,13,"asm.customerSearch.submit")," "),a(2),p("ngIf",c(11,15,o.searchResults)),a(2),p("ngIf",c(13,17,o.searchResultsLoading$)))},dependencies:[Ie,j,ge,ne,re,_e,Le,Ee,we,De,tt,J,R],encapsulation:2});let t=r;return t})(),Gr=(()=>{let r=class r{transform(e){e<0&&(e=0);let i=Math.floor(e/60),o=e%60,m;i<10?m=("00"+i).slice(-2):m=i+"";let h=("00"+o).slice(-2);return`${m}:${h}`}};r.\u0275fac=function(i){return new(i||r)},r.\u0275pipe=ut({name:"formatTimer",type:r,pure:!0});let t=r;return t})(),Hr=(()=>{let r=class r{constructor(e,i,o,m,h){this.config=e,this.asmComponentService=i,this.routingService=o,this.changeDetectorRef=m,this.userIdService=h,this.subscriptions=new q,this.maxStartDelayInSeconds=6e4}ngOnInit(){this.initTimer(),this.interval=setInterval(()=>{let e=new Date().getTime()/1e3;this.timeLeft=Math.floor(this.expiredTime-e),this.timeLeft<=0&&(clearInterval(this.interval),this.asmComponentService.logoutCustomerSupportAgentAndCustomer()),this.changeDetectorRef.markForCheck()},1e3),this.resetOnNavigate(),this.resetOnCustomerSessionChange()}resetOnNavigate(){this.subscriptions.add(this.routingService.isNavigating().subscribe(e=>{e&&this.resetTimer()}))}resetOnCustomerSessionChange(){this.subscriptions.add(this.userIdService.getUserId().pipe(Se()).subscribe(()=>this.resetTimer()))}initTimer(){let e=this.getTimerStartDelayInSeconds(),i=new Date().getTime()/1e3;this.timeLeft=e,this.expiredTime=i+this.timeLeft}resetTimer(){this.timeLeft>0&&this.initTimer()}getTimerStartDelayInSeconds(){return this.config.asm?.agentSessionTimer?.startingDelayInSeconds===void 0?600:this.config.asm.agentSessionTimer.startingDelayInSeconds>this.maxStartDelayInSeconds?this.maxStartDelayInSeconds:this.config.asm.agentSessionTimer.startingDelayInSeconds}ngOnDestroy(){this.subscriptions.unsubscribe(),this.interval&&clearInterval(this.interval)}};r.\u0275fac=function(i){return new(i||r)(x(se),x(he),x(ie),x(xt),x(It))},r.\u0275cmp=B({type:r,selectors:[["cx-asm-session-timer"]],decls:9,vars:12,consts:[[1,"label"],[1,"time"],[1,"reset",3,"click","title"]],template:function(i,o){i&1&&(l(0,"span",0),g(1),s(2,"cxTranslate"),u(),l(3,"span",1),g(4),s(5,"formatTimer"),s(6,"cxTranslate"),u(),l(7,"button",2),s(8,"cxTranslate"),v("click",function(){return o.resetTimer()}),u()),i&2&&(a(),S("",c(2,4,"asm.agentSessionTimer.label"),":"),a(3),Ct("",c(5,6,o.timeLeft)," ",c(6,8,"asm.agentSessionTimer.minutes"),""),a(3),F("title",c(8,10,"asm.agentSessionTimer.reset")))},dependencies:[R,Gr],encapsulation:2});let t=r;return t})(),Qr=(()=>{let r=class r{constructor(e,i,o,m){this.asmComponentService=e,this.userAccountFacade=i,this.launchDialogService=o,this.featureModules=m,this.isAsmCustomer360Configured=!1,this.isAsmCustomer360Loaded$=new H(!1),this.subscription=new q}ngOnInit(){this.isAsmCustomer360Configured=this.featureModules?.isConfigured("asmCustomer360"),this.isAsmCustomer360Configured&&this.featureModules?.resolveFeature("asmCustomer360").subscribe(()=>{this.isAsmCustomer360Loaded$.next(!0)}),this.subscription.add(this.userAccountFacade.get().subscribe(e=>{e&&(this.customer=e)})),this.isCustomerEmulationSessionInProgress$=this.asmComponentService.isCustomerEmulationSessionInProgress()}logoutCustomer(){this.asmComponentService.logoutCustomer()}openAsmCustomer360(){this.subscription.add(this.isAsmCustomer360Loaded$.pipe(D(e=>!!e)).subscribe(()=>{let e={customer:this.customer};this.launchDialogService?.openDialogAndSubscribe("ASM_CUSTOMER_360",this.asmCustomer360LauncherElement,e),this.subscription.add(this.launchDialogService?.dialogClose.pipe(D(i=>!!i)).subscribe(i=>{this.asmComponentService.handleAsmDialogAction(i)}))}))}ngOnDestroy(){this.subscription.unsubscribe()}};r.\u0275fac=function(i){return new(i||r)(x(he),x(Ye),x(G),x(Ft))},r.\u0275cmp=B({type:r,selectors:[["cx-customer-emulation"]],viewQuery:function(i,o){if(i&1&&O(Yi,5),i&2){let m;$(m=U())&&(o.asmCustomer360LauncherElement=m.first)}},decls:2,vars:3,consts:[["asmCustomer360Launcher",""],[4,"ngIf"],[1,"cx-asm-customerInfo"],[1,"cx-asm-name"],[1,"cx-asm-uid"],["class","cx-360-button",3,"click",4,"ngIf"],["formcontrolname","logoutCustomer",3,"click"],[1,"cx-360-button",3,"click"]],template:function(i,o){i&1&&(_(0,Zi,11,6,"ng-container",1),s(1,"async")),i&2&&p("ngIf",c(1,1,o.isCustomerEmulationSessionInProgress$))},dependencies:[j,Or,J,R],encapsulation:2});let t=r;return t})(),Kr=(()=>{let r=class r{constructor(e){this.asmService=e,this.subscription=new q}ngOnInit(){this.subscription.add(this.asmService.getAsmUiState().subscribe(e=>{this.isCollapsed=e.collapsed===void 0?!1:e.collapsed}))}toggleUi(){this.asmService.updateAsmUiState({collapsed:!this.isCollapsed})}ngOnDestroy(){this.subscription.unsubscribe()}};r.\u0275fac=function(i){return new(i||r)(x(Fe))},r.\u0275cmp=B({type:r,selectors:[["cx-asm-toggle-ui"]],decls:4,vars:3,consts:[["tabindex","0","role","button",1,"toggleUi",3,"click"],[3,"ngClass"],["class","label",4,"ngIf"],[1,"label"]],template:function(i,o){i&1&&(l(0,"a",0),v("click",function(){return o.toggleUi()}),b(1,"span",1),_(2,Xi,3,3,"span",2)(3,en,3,3,"span",2),u()),i&2&&(a(),p("ngClass",o.isCollapsed?"expandIcon":"collapseIcon"),a(),p("ngIf",!o.isCollapsed),a(),p("ngIf",o.isCollapsed))},dependencies:[St,j,R],encapsulation:2});let t=r;return t})(),qr={active:"asm.activeCartAlertInfo",inactive:"asm.saveInactiveCartAlertInfo"},Wr=(()=>{let r=class r{constructor(e,i,o,m,h,E,le,me){this.authService=e,this.csAgentAuthService=i,this.asmComponentService=o,this.globalMessageService=m,this.routingService=h,this.asmService=E,this.userAccountFacade=le,this.launchDialogService=me,this.iconTypes=ke,this.showDeeplinkCartInfoAlert$=this.asmComponentService.shouldShowDeeplinkCartInfoAlert(),this.deeplinkCartAlertKey="",this.showCreateCustomerSuccessfullyAlert=!1,this.globalMessageType=Q,this.disabled=!1,this.startingCustomerSession=!1,this.showCustomerEmulationInfoAlert=!0,this.subscription=new q}ngOnInit(){this.customerSupportAgentLoggedIn$=this.csAgentAuthService.isCustomerSupportAgentLoggedIn().pipe(Se(),N(e=>{e||this.closeModal()})),this.csAgentTokenLoading$=this.csAgentAuthService.getCustomerSupportAgentTokenLoading(),this.customer$=this.authService.isUserLoggedIn().pipe(pt(e=>e?(this.handleCustomerSessionStartRedirection(),this.userAccountFacade.get()):rt(void 0))),this.isCollapsed$=this.asmService.getAsmUiState().pipe(W(e=>e.collapsed===void 0?!1:e.collapsed)),this.subscription.add(this.launchDialogService.dialogClose.pipe(D(e=>!!e)).subscribe(e=>{typeof e!="string"&&("selectedUser"in e?(this.startCustomerEmulationSession(e.selectedUser),e.actionType===ce.ORDER_HISTORY&&this.routingService.go({cxRoute:"orders"})):"customerId"in e&&(this.startCustomerEmulationSession({customerId:e.customerId}),this.showCreateCustomerSuccessfullyAlert=!0,this.routingService.go("/")),"actionType"in e&&e.actionType===ce.ACTIVE_CART&&this.routingService.go({cxRoute:"cart"}))})),this.subscribeForDeeplink()}subscribeForDeeplink(){this.asmComponentService.isEmulateInURL()&&this.routingService.go("/");let e=this.asmComponentService.getDeepLinkUrlParams()??{customerId:this.asmComponentService.getSearchParameter("customerId"),orderId:this.asmComponentService.getSearchParameter("orderId"),ticketId:this.asmComponentService.getSearchParameter("ticketId"),cartId:this.asmComponentService.getSearchParameter("cartId"),cartType:this.asmComponentService.getSearchParameter("cartType"),emulated:!1};this.deeplinkCartAlertKey=qr[e.cartType||""],this.subscription.add(ve([this.customerSupportAgentLoggedIn$,this.authService.isUserLoggedIn(),this.asmComponentService.isEmulatedByDeepLink()]).subscribe(([i,o,m])=>{i&&e.customerId&&(!m&&o?this.confirmSwitchCustomer(e.customerId):setTimeout(()=>this.startSessionWithParameters(it(Ve({},e),{emulated:m}))))}))}confirmSwitchCustomer(e){this.customer$.pipe(D(i=>!!i),V(1)).subscribe(i=>{i?.customerId!==e?this.userAccountFacade.getById(e).subscribe({next:o=>{this.launchDialogService.openDialogAndSubscribe("ASM_SWITCH_CUSTOMER",this.element,{curCustomer:i,switchCustomer:o})},error:o=>{this.globalMessageService.add(o.details?.[0].message??"",Q.MSG_TYPE_ERROR)}}):this.asmComponentService.setEmulatedByDeepLink(!0)})}startSessionWithParameters(e){e.emulated||(this.asmComponentService.setEmulatedByDeepLink(!0),this.startCustomerEmulationSession({customerId:e.customerId},e))}handleCustomerSessionStartRedirection(){this.asmComponentService.isCustomerEmulationSessionInProgress().pipe(V(1)).subscribe(e=>{this.startingCustomerSession&&e&&(this.startingCustomerSession=!1,this.globalMessageService.remove(Q.MSG_TYPE_ERROR),this.routingService.go("/"))})}loginCustomerSupportAgent({userId:e,password:i}){this.csAgentAuthService.authorizeCustomerSupportAgent(e,i)}logout(){this.asmComponentService.logoutCustomerSupportAgentAndCustomer()}startCustomerEmulationSession({customerId:e},i){e?(this.csAgentAuthService.startCustomerEmulationSession(e),this.startingCustomerSession=!0,this.showCustomerEmulationInfoAlert=!0,this.showCreateCustomerSuccessfullyAlert=!1,i&&this.asmComponentService.handleDeepLinkNavigation(Ve({customerId:e},i))):this.globalMessageService.add({key:"asm.error.noCustomerId"},Q.MSG_TYPE_ERROR)}hideUi(){this.disabled=!0,this.asmComponentService.unload()}showCustomList(){this.launchDialogService.openDialogAndSubscribe("ASM_CUSTOMER_LIST",this.element)}closeModal(){this.launchDialogService.closeDialog("logout")}createCustomer(){this.launchDialogService?.openDialogAndSubscribe("ASM_CREATE_CUSTOMER_FORM",this.addNewCustomerLink)}closeDialogConfirmationAlert(){this.showCreateCustomerSuccessfullyAlert=!1}closeDeeplinkCartInfoAlert(){this.asmComponentService.setShowDeeplinkCartInfoAlert(!1)}closeCustomerEmulationInfoAlert(){this.showCustomerEmulationInfoAlert=!1}ngOnDestroy(){this.subscription?.unsubscribe()}};r.\u0275fac=function(i){return new(i||r)(x(Ue),x(Ze),x(he),x(Ge),x(ie),x(Fe),x(Ye),x(G))},r.\u0275cmp=B({type:r,selectors:[["cx-asm-main-ui"]],viewQuery:function(i,o){if(i&1&&(O(tn,5),O(vi,5)),i&2){let m;$(m=U())&&(o.element=m.first),$(m=U())&&(o.addNewCustomerLink=m.first)}},hostVars:2,hostBindings:function(i,o){i&2&&k("hidden",o.disabled)},decls:20,vars:23,consts:[["customerListLink",""],["showLoginForm",""],["showCustomerSelection",""],[1,"asm-bar"],[1,"asm-bar-branding"],["src","data:image/png;base64,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","width","48","height","24",1,"logo",3,"alt"],[1,"asm-title"],[1,"asm-bar-actions"],["class","cx-asm-customer-list",4,"ngIf"],[4,"ngIf"],["class","close",3,"title","click",4,"ngIf"],["class","logout",3,"title","click",4,"ngIf"],[1,"cx-asm-customer-list"],["tabindex","0","role","button",1,"cx-asm-customer-list-link",3,"click"],[3,"type"],[1,"close",3,"click","title"],[1,"logout",3,"click","title"],[4,"ngIf","ngIfElse"],[3,"text","type","closeMessage",4,"ngIf"],[3,"closeMessage","text","type"],[3,"submitEvent",4,"ngIf"],[3,"submitEvent"],[3,"csAgentTokenLoading","submitEvent",4,"ngIf"],[3,"submitEvent","csAgentTokenLoading"]],template:function(i,o){i&1&&(l(0,"div",3)(1,"div",4),b(2,"img",5),s(3,"cxTranslate"),l(4,"div",6),g(5),s(6,"cxTranslate"),u()(),l(7,"div",7),_(8,nn,7,4,"div",8),s(9,"async"),b(10,"cx-asm-toggle-ui"),_(11,rn,1,0,"cx-asm-session-timer",9),s(12,"async"),_(13,on,2,3,"button",10),s(14,"async"),s(15,"async"),_(16,an,2,3,"button",11),s(17,"async"),u()(),_(18,fn,5,4,"ng-container",9),s(19,"async")),i&2&&(a(2),F("alt",c(3,7,"asm.mainLogoLabel")),a(3),S(" ",c(6,9,"asm.mainTitle")," "),a(3),p("ngIf",c(9,11,o.customerSupportAgentLoggedIn$)),a(3),p("ngIf",c(12,13,o.customerSupportAgentLoggedIn$)),a(2),p("ngIf",!c(14,15,o.customerSupportAgentLoggedIn$)&&!c(15,17,o.csAgentTokenLoading$)),a(3),p("ngIf",c(17,19,o.customerSupportAgentLoggedIn$)),a(2),p("ngIf",!c(19,21,o.isCollapsed$)))},dependencies:[j,fe,Be,jr,zr,Hr,Qr,Kr,J,R],encapsulation:2});let t=r;return t})(),Xe=function(t){return t.CANCEL="CANCEL",t.SWITCH="SWITCH",t}(Xe||{}),Yr=(()=>{let r=class r{constructor(e,i){this.launchDialogService=e,this.asmComponentService=i,this.SWITCH_CUSTOMER_DIALOG_ACTION=Xe,this.focusConfig={trap:!0,block:!0,autofocus:!0,focusOnEscape:!0}}ngOnInit(){this.launchDialogService.data$.pipe(V(1)).subscribe(e=>{this.curCustomerName=e.curCustomer.name||"",this.switchCustomerName=e.switchCustomer.name||""})}closeModal(e){e===Xe.SWITCH&&this.asmComponentService.logoutCustomer(),this.launchDialogService.closeDialog(e)}};r.\u0275fac=function(i){return new(i||r)(x(G),x(he))},r.\u0275cmp=B({type:r,selectors:[["cx-asm-switch-customer-dialog"]],decls:23,vars:23,consts:[[1,"cx-asm-switch-customer-dialog","cx-modal-container","cx-asm-dialog",3,"esc","cxFocus"],[1,"cx-modal-content"],[1,"cx-dialog-header","modal-header"],["type","WARNING"],["id","asm-switch-customer-dialog-title",1,"title","modal-title"],[1,"cx-dialog-body","modal-body"],[1,"cx-dialog-row","switch-customer-content"],[1,"cx-dialog-item"],[1,"cx-dialog-footer","modal-footer"],["type","button",1,"btn","btn-primary",3,"click"],["type","button",1,"btn","btn-secondary",3,"click"]],template:function(i,o){i&1&&(l(0,"div",0),v("esc",function(){return o.closeModal(o.SWITCH_CUSTOMER_DIALOG_ACTION.CANCEL)}),l(1,"div",1)(2,"div",2)(3,"div")(4,"span"),b(5,"cx-icon",3),u(),l(6,"span",4),g(7),s(8,"cxTranslate"),u()()(),l(9,"div",5)(10,"div",6)(11,"div",7),g(12),s(13,"cxTranslate"),u()()(),l(14,"div",8)(15,"button",9),s(16,"cxTranslate"),v("click",function(){return o.closeModal(o.SWITCH_CUSTOMER_DIALOG_ACTION.SWITCH)}),g(17),s(18,"cxTranslate"),u(),l(19,"button",10),s(20,"cxTranslate"),v("click",function(){return o.closeModal(o.SWITCH_CUSTOMER_DIALOG_ACTION.CANCEL)}),g(21),s(22,"cxTranslate"),u()()()()),i&2&&(p("cxFocus",o.focusConfig),a(7),S(" ",c(8,7,"asm.switchCustomer.dialog.title")," "),a(5),S(" ",Te(13,9,"asm.switchCustomer.dialog.body",Y(20,hn,o.curCustomerName,o.switchCustomerName))," "),a(3),T("aria-label",c(16,12,"asm.switchCustomer.dialog.actions.switch")),a(2),S(" ",c(18,14,"asm.switchCustomer.dialog.actions.switch")," "),a(2),T("aria-label",c(20,16,"common.cancel")),a(2),S(" ",c(22,18,"common.cancel")," "))},dependencies:[fe,oe,R],encapsulation:2});let t=r;return t})(),Jr=(()=>{let r=class r{constructor(e,i,o,m,h,E){this.launchDialogService=e,this.breakpointService=i,this.asmConfig=o,this.translation=m,this.asmCustomerListFacade=h,this.occConfig=E,this.DEFAULT_PAGE_SIZE=5,this.focusConfig={trap:!0,block:!0,autofocus:"customer-list-selector",focusOnEscape:!0},this.iconTypes=ke,this.BREAKPOINT=Ce,this.currentPage=0,this.maxPage=0,this.loaded=!1,this.listsError=!1,this.listsEmpty=!1,this.enableAsmB2bCustomerList=!1,this.customerListColumnActionType=ce,this.searchBox=new Vt,this.teardown=new q,this.breakpoint$=this.getBreakpoint()}ngOnInit(){this.pageSize=this.asmConfig.asm?.customerList?.pageSize??this.DEFAULT_PAGE_SIZE,this.customerListConfig=this.asmConfig?.asm?.customerList,this.customerListsPage$=this.asmCustomerListFacade.getCustomerListsState().pipe(N(e=>this.listsError=!!e.error),W(e=>{if(e?.data?.userGroups?.length===0){this.listsEmpty=!0;return}else return e.data}),Se(),N(e=>{this.selectedUserGroupId||(this.selectedUserGroupId=e?.userGroups?.[0]?.uid,this.sorts=null,this.fetchCustomers())}))??at,this.customerSearchLoading$=this.asmCustomerListFacade.getCustomerListCustomersSearchResultsLoading().pipe(N(e=>this.loaded=!e)),this.teardown.add(this.customerSearchLoading$.subscribe()),this.teardown.add(()=>this.asmCustomerListFacade.customerListCustomersSearchReset()),this.customerSearchError$=this.asmCustomerListFacade.getCustomerListCustomersSearchResultsError(),this.customerSearchPage$=this.asmCustomerListFacade.getCustomerListCustomersSearchResults().pipe(N(e=>{e?.sorts&&(this.sorts=e.sorts,this.sortCode=e.pagination?.sort),e?.entries.length<this.pageSize?this.maxPage=e.pagination?.currentPage??0:this.maxPage=this.currentPage+1}))}ngOnDestroy(){this.teardown.unsubscribe()}changePage(e){let i={customerListId:this.selectedUserGroupId,pageSize:this.pageSize,currentPage:e,sort:this.sortCode};this.searchBox?.value&&(i.query=this.searchBox.value),this.asmCustomerListFacade.customerListCustomersSearch(i)}fetchCustomers(){if(this.enableAsmB2bCustomerList=this.selectedUserGroupId==="b2bCustomerList",this.selectedUserGroupId){let e={customerListId:this.selectedUserGroupId,pageSize:this.pageSize,currentPage:this.currentPage};this.sortCode&&(e.sort=this.sortCode),this.searchBox?.value&&(e.query=this.searchBox.value),this.asmCustomerListFacade.customerListCustomersSearchReset(),this.asmCustomerListFacade.customerListCustomersSearch(e)}this.updateCustomerListColumns()}updateCustomerListColumns(){let e=this.customerListConfig?.columns||[];for(let i of e)(i.headerLocalizationKey==="asm.customerList.tableHeader.account"||i.headerLocalizationKey==="hideHeaders")&&(i.headerLocalizationKey=this.enableAsmB2bCustomerList?"asm.customerList.tableHeader.account":"hideHeaders")}onChangeCustomerGroup(){this.currentPage=0,this.sorts=null,this.sortCode="",this.fetchCustomers()}getGroupName(e,i){return e?.userGroups?.find(o=>o.uid===i)?.name??""}getBadgeText(e){return(e.firstName?.charAt(0)??"")+(e.lastName?.charAt(0)??"")}startColumnAction(e,i){this.selectedCustomer=e;let o={actionType:i,selectedUser:e};this.closeModal(o)}onKey(e){e.key==="Enter"&&this.searchCustomers()}searchCustomers(){this.currentPage=0,this.fetchCustomers()}isRequired(e,i){return i===ce.ACTIVE_CART&&!e.lastCartId||i===ce.ORDER_HISTORY&&e.hasOrder!==!0}changeSortCode(e){this.sortCode=e,this.fetchCustomers()}goToNextPage(){this.currentPage>=this.maxPage?this.currentPage=this.maxPage:this.loaded&&(this.currentPage++,this.fetchCustomers())}goToPreviousPage(){this.currentPage<=0?this.currentPage=0:this.loaded&&(this.currentPage--,this.fetchCustomers())}closeModal(e){this.launchDialogService.closeDialog(e)}getSortLabels(){return ve([this.translation.translate("asm.customerList.tableSort.byName"),this.translation.translate("asm.customerList.tableSort.byNameAsc"),this.translation.translate("asm.customerList.tableSort.byNameDesc"),this.translation.translate("asm.customerList.tableSort.byDateAsc"),this.translation.translate("asm.customerList.tableSort.byDateDesc"),this.translation.translate("asm.customerList.tableSort.byOrderDateAsc"),this.translation.translate("asm.customerList.tableSort.byOrderDateDesc"),this.translation.translate("asm.customerList.tableSort.byUnit"),this.translation.translate("asm.customerList.tableSort.byUnitDesc")]).pipe(W(([e,i,o,m,h,E,le,me,X])=>({byName:e,byNameAsc:i,byNameDesc:o,byOrderDateAsc:E,byOrderDateDesc:le,byDateAsc:m,byDateDesc:h,byUnit:me,byUnitDesc:X})))}createCustomer(){this.launchDialogService.closeDialog("Create customer click"),this.launchDialogService?.openDialogAndSubscribe("ASM_CREATE_CUSTOMER_FORM",this.addNewCustomerLink)}getBreakpoint(){return this.breakpointService.breakpoint$.pipe(W(e=>((e===Ce.lg||e===Ce.xl)&&(e=Ce.md),e)))}};r.\u0275fac=function(i){return new(i||r)(x(G),x(Ht),x(se),x(He),x(pi),x(At))},r.\u0275cmp=B({type:r,selectors:[["cx-customer-list"]],viewQuery:function(i,o){if(i&1&&O(vi,5),i&2){let m;$(m=U())&&(o.addNewCustomerLink=m.first)}},decls:48,vars:28,consts:[["cell",""],["cellContent",""],["search",""],["total",""],["sort",""],["pagination",""],["groupSelector",""],["closeButton",""],["createCustomerButton",""],[1,"cx-asm-customer-list","cx-modal-container","cx-asm-dialog",3,"esc","cxFocus"],[1,"cx-modal-content"],[1,"cx-dialog-header","modal-header"],["id","asm-customer-list-title",1,"title","modal-title"],["id","asm-customer-list-desc",1,"cx-visually-hidden"],[4,"ngTemplateOutlet"],["class","cx-dialog-sub-header modal-header",3,"tablet-mobile",4,"ngIf"],[1,"cx-dialog-body","modal-body"],[1,"cx-dialog-row"],[1,"cx-dialog-item"],["class","cx-error-state",4,"ngIf"],[4,"ngIf"],["class","cx-dialog-sub-header modal-header cx-dialog-foot",3,"asm-mobile-pagination",4,"ngIf"],[1,"cx-dialog-footer","modal-footer"],["type","button",1,"btn","cx-asm-customer-list-btn-cancel",3,"click"],[1,"cx-dialog-sub-header","modal-header"],[1,"cx-header-select"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"cx-header-actions"],[1,"cx-error-state"],["id","asm-cusomer-list-table","role","table","class","table",4,"ngIf"],["class","cx-empty-state",4,"ngIf"],["id","asm-cusomer-list-table","role","table",1,"table"],[1,"cx-visually-hidden"],["role","row",4,"ngFor","ngForOf"],["role","row"],["role","columnheader",4,"ngFor","ngForOf"],["role","columnheader"],["role","cell","class","cx-multi-cell",4,"ngIf"],["role","cell",4,"ngFor","ngForOf"],["role","cell"],["role","cell",1,"cx-multi-cell"],[4,"ngFor","ngForOf"],[1,"cx-empty-state"],[1,"cx-dialog-sub-header","modal-header","cx-dialog-foot"],[3,"viewPageEvent","pagination"],["class","cx-cell-container",4,"ngIf"],[1,"cx-cell-container"],["class","cx-header-text",4,"ngIf"],["class","cx-avatar",4,"ngIf"],["class","btn btn-link cx-action-link cx-btn-cell",3,"class","disabled","click",4,"ngIf"],[1,"cx-header-text"],[1,"cx-avatar"],[3,"alt",4,"ngIf"],["class","cx-avatar-text",4,"ngIf"],[3,"alt"],[1,"cx-avatar-text"],[1,"btn","btn-link","cx-action-link","cx-btn-cell",3,"click","disabled"],[3,"cx-action-color","type",4,"ngIf"],[3,"type"],[1,"form-group","search-wrapper"],["type","text",1,"form-control",3,"keyup","formControl","placeholder"],["role","button",1,"search",3,"click","type"],["class","cx-total",4,"ngIf"],[1,"cx-total"],[1,"sort-selector",3,"sortListEvent","sortOptions","sortLabels","selectedOption","placeholder","cxNgSelectA11y"],[1,"cx-pagination-buttons"],["class","btn btn-link cx-action-link cx-btn-previous",3,"disabled","click",4,"ngIf"],["class","btn btn-link cx-action-link cx-btn-next",3,"disabled","click",4,"ngIf"],[1,"btn","btn-link","cx-action-link","cx-btn-previous",3,"click","disabled"],[1,"previous",3,"type"],[1,"btn","btn-link","cx-action-link","cx-btn-next",3,"click","disabled"],[1,"next",3,"type"],["bindLabel","name","bindValue","uid",1,"customer-list-selector",3,"change","ngModelChange","searchable","clearable","tabIndex","ngModel","items","cxNgSelectA11y"],["type","button",1,"close",3,"click"],["aria-hidden","true"],["type","button",1,"btn","cx-asm-create-customer-btn",3,"click"]],template:function(i,o){if(i&1){let m=y();l(0,"div",9),v("esc",function(){return C(m),f(o.closeModal("Escape clicked"))}),l(1,"div",10),I(2),l(3,"div",11)(4,"h2",12),g(5),s(6,"cxTranslate"),u(),l(7,"div",13),g(8),s(9,"cxTranslate"),u(),_(10,yn,1,0,null,14),u(),_(11,Bn,11,24,"div",15),s(12,"async"),l(13,"div",16)(14,"div",17)(15,"div",18),_(16,Fn,3,3,"div",19)(17,Mn,3,3,"div",19)(18,Rn,3,3,"div",19),s(19,"async"),_(20,Vn,1,0,"cx-spinner",20),s(21,"async"),_(22,lr,3,2,"div",20),s(23,"async"),u()()(),_(24,pr,6,11,"div",21),s(25,"async"),l(26,"div",22)(27,"button",23),v("click",function(){return C(m),f(o.closeModal("Cancel click"))}),g(28),s(29,"cxTranslate"),u()(),A(),u()(),_(30,Sr,1,1,"ng-template",null,0,M)(32,Tr,3,2,"ng-template",null,1,M)(34,Ir,6,11,"ng-template",null,2,M)(36,Lr,1,1,"ng-template",null,3,M)(38,kr,7,14,"ng-template",null,4,M)(40,Fr,6,8,"ng-template",null,5,M)(42,Mr,5,11,"ng-template",null,6,M)(44,Rr,4,4,"ng-template",null,7,M)(46,Vr,5,4,"ng-template",null,8,M)}if(i&2){let m=w(47);p("cxFocus",o.focusConfig),a(5),S(" ",c(6,12,"asm.customerList.title")," "),a(3),S(" ",c(9,14,"asm.customerList.description")," "),a(2),p("ngTemplateOutlet",m),a(),p("ngIf",c(12,16,o.customerListsPage$)),a(5),p("ngIf",o.listsEmpty),a(),p("ngIf",o.listsError),a(),p("ngIf",c(19,18,o.customerSearchError$)),a(2),p("ngIf",c(21,20,o.customerSearchLoading$)),a(2),p("ngIf",c(23,22,o.customerSearchPage$)),a(2),p("ngIf",c(25,24,o.customerListsPage$)),a(4),S(" ",c(29,26,"asm.createCustomerForm.cancel")," ")}},dependencies:[Ie,j,bt,ne,re,Qe,fe,Ut,Nt,We,oe,Yt,Jt,ei,J,R],encapsulation:2});let t=r;return t})(),Zr={launch:{ASM_CUSTOMER_LIST:{inlineRoot:!0,component:Jr,dialogType:ae.DIALOG}}},Xr={launch:{ASM:{outlet:"cx-storefront",component:Wr}}},eo={pagination:{rangeCount:2,addPrevious:!0,addNext:!0,addStart:!1,addEnd:!1,addFirst:!0,addLast:!0,addDots:!0,substituteDotsForSingularPage:!0,dotsLabel:"\xB7\xB7\xB7"}},to={launch:{ASM_BIND_CART:{inlineRoot:!0,component:Nr,dialogType:ae.DIALOG}}},io={launch:{ASM_SAVE_CART:{inlineRoot:!0,component:Pr,dialogType:ae.DIALOG}}},no={launch:{ASM_SWITCH_CUSTOMER:{inlineRoot:!0,component:Yr,dialogType:ae.DIALOG}}},yi=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275mod=te({type:r}),r.\u0275inj=ee({providers:[z(Xr),z(to),z(io),z(no),z(Zr),z(eo),z(Ur)],imports:[Ae,$t,Bt,Kt,Gt,jt,Ot,Qt,Wt,zt,Zt,Xt,ti,ii]});let t=r;return t})();var ro=(()=>{let r=class r{constructor(e,i,o,m,h){this.http=e,this.occEndpointsService=i,this.converterService=o,this.config=m,this.baseSiteService=h,this.logger=ye(wt),this.baseSiteService.getActive().subscribe(E=>this.activeBaseSite=E)}getHeaders(){return ze.createHeader(je,!0,new $e)}customerLists(){let e=this.getHeaders(),i=new ue().set("baseSite",this.activeBaseSite),o=this.occEndpointsService.buildUrl("asmCustomerLists",{},{baseSite:!1,prefix:!1});return this.http.get(o,{headers:e,params:i}).pipe(pe(m=>{throw de(m,this.logger)}),this.converterService.pipeable(Ci))}customerSearch(e){let i=this.getHeaders(),o=new ue().set("baseSite",this.activeBaseSite);e.sort!==void 0?o=o.set("sort",e.sort):e.customerListId||(o=o.set("sort","byNameAsc")),e.query!==void 0&&(o=o.set("query",e.query)),e.pageSize!==void 0&&(o=o.set("pageSize",e.pageSize.toString())),e.currentPage!==void 0&&(o=o.set("currentPage",e.currentPage.toString())),e.customerListId!==void 0&&(o=o.set("customerListId",e.customerListId));let m=this.occEndpointsService.buildUrl("asmCustomerSearch",{},{baseSite:!1,prefix:!1});return this.http.get(m,{headers:i,params:o}).pipe(pe(h=>{throw de(h,this.logger)}),this.converterService.pipeable(gi))}bindCart({cartId:e,customerId:i}){let o=ze.createHeader(je,!0,new $e),m=new ue().set("baseSite",this.activeBaseSite).set("cartId",e).set("customerId",i),h=this.occEndpointsService.buildUrl("asmBindCart",{},{baseSite:!1,prefix:!1});return this.http.post(h,{},{headers:o,params:m}).pipe(pe(E=>{throw de(E,this.logger)}))}createCustomer(e){let i=this.getHeaders(),o=new ue().set("baseSite",this.activeBaseSite),m=this.occEndpointsService.buildUrl("asmCreateCustomer",{},{baseSite:!1,prefix:!1});return this.http.post(m,e,{headers:i,params:o}).pipe(pe(h=>{throw de(h,this.logger)}))}};r.\u0275fac=function(i){return new(i||r)(P(yt),P(kt),P(Dt),P(se),P(Lt))},r.\u0275prov=be({token:r,factory:r.\u0275fac});let t=r;return t})(),oo={backend:{occ:{endpoints:{asmCustomerSearch:"/assistedservicewebservices/customers/search",asmCustomerLists:"/assistedservicewebservices/customerlists",asmBindCart:"/assistedservicewebservices/bind-cart",asmCreateCustomer:"/assistedservicewebservices/customers"}}}},Ti=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275mod=te({type:r}),r.\u0275inj=ee({providers:[z(oo),{provide:_i,useClass:ro}],imports:[Ae]});let t=r;return t})();var Yo=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275mod=te({type:r}),r.\u0275inj=ee({imports:[yi,fi,Ti]});let t=r;return t})();export{Yo as AsmModule};
