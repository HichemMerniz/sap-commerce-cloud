import{c as X}from"./chunk-AOSSJKBV.js";import"./chunk-LFKNHGJI.js";import{M as q,O as z,P as G,ba as J,ga as K,ia as Q}from"./chunk-XOYCCVJR.js";import{$d as j,Ab as v,Ba as y,Ca as I,Cf as Y,Df as O,I as T,Ib as P,Ob as s,Pa as c,Pb as p,Qa as u,Sd as V,Tb as W,_a as _,ab as a,cd as D,ed as R,gb as l,hb as x,hf as U,ia as L,ib as h,ic as B,if as H,jb as m,kb as g,mb as k,md as N,nc as F,oa as b,ob as S,pb as r,tc as $,v as A,va as M,wa as w,yb as E,zb as C}from"./chunk-EVGLS3CH.js";var Z=()=>({cxRoute:"login"});function tt(t,i){if(t&1){let n=k();l(0,"div")(1,"button",4),s(2,"async"),s(3,"cxTranslate"),S("click",function(){let o=y(n).ngIf,d=r(5);return I(d.remove(o))}),h(4,"cx-icon",5),l(5,"span",6),C(6),s(7,"cxTranslate"),x()()()}if(t&2){let n=r(5);c(),a("disabled",p(2,4,n.loading$))("cxAtMessage",p(3,6,"addToWishList.removedFromWishList")),c(3),a("type",n.iconTypes.HEART),c(2),v(p(7,8,"addToWishList.remove"))}}function et(t,i){if(t&1){let n=k();l(0,"button",7),s(1,"async"),s(2,"cxTranslate"),S("click",function(){y(n);let o=r(4).ngIf,d=r();return I(d.add(o))}),h(3,"cx-icon",5),l(4,"span",6),C(5),s(6,"cxTranslate"),x()()}if(t&2){let n=r(5);a("disabled",p(1,4,n.loading$))("cxAtMessage",p(2,6,"addToWishList.addedToWishList")),c(3),a("type",n.iconTypes.EMPTY_HEART),c(2),v(p(6,8,"addToWishList.add"))}}function it(t,i){if(t&1&&(m(0),_(1,tt,8,10,"div",3)(2,et,7,10,"ng-template",null,1,W),g()),t&2){let n=E(3),e=r().ngIf,o=r(2).ngIf,d=r();c(),a("ngIf",d.getProductInWishList(o,e))("ngIfElse",n)}}function nt(t,i){if(t&1&&(m(0),_(1,it,4,2,"ng-container",2),g()),t&2){let n=r(3);c(),a("ngIf",n.hasStock)}}function ot(t,i){if(t&1&&(m(0),_(1,nt,2,1,"ng-container",2),s(2,"async"),g()),t&2){let n=r(2);c(),a("ngIf",p(2,1,n.wishListEntries$))}}function rt(t,i){if(t&1&&(m(0),_(1,ot,3,3,"ng-container",3),s(2,"async"),g()),t&2){let n=r(),e=E(3);c(),a("ngIf",p(2,2,n.userLoggedIn$))("ngIfElse",e)}}function ct(t,i){if(t&1&&(m(0),l(1,"a",8),s(2,"cxUrl"),h(3,"cx-icon",5),l(4,"span",6),C(5),s(6,"cxTranslate"),x()(),g()),t&2){let n=r(2);c(),a("routerLink",p(2,3,P(7,Z))),c(2),a("type",n.iconTypes.EMPTY_HEART),c(2),v(p(6,5,"addToWishList.anonymous"))}}function at(t,i){if(t&1&&_(0,ct,7,8,"ng-container",2),t&2){let n=r();a("ngIf",n.hasStock)}}var st=(()=>{let i=class i{constructor(e,o,d){this.wishListFacade=e,this.currentProductService=o,this.authService=d,this.product$=this.currentProductService.getProduct().pipe(T(V),L(f=>this.setStockInfo(f))),this.userLoggedIn$=this.authService.isUserLoggedIn().pipe(L(f=>{f&&(this.wishListEntries$=this.getWishListEntries(),this.loading$=this.wishListFacade.getWishListLoading())})),this.hasStock=!1,this.iconTypes=q}add(e){e.code&&this.wishListFacade.addEntry(e.code)}remove(e){this.wishListFacade.removeEntry(e)}getProductInWishList(e,o){return o.find(f=>f.product?.code===e.code)}setStockInfo(e){this.hasStock=!!(e.stock&&e.stock.stockLevelStatus!=="outOfStock")}getWishListEntries(){return this.wishListFacade.getWishList().pipe(T(e=>!!e),A(e=>e.entries??[]))}};i.\u0275fac=function(o){return new(o||i)(u(X),u(J),u(j))},i.\u0275cmp=M({type:i,selectors:[["cx-add-to-wishlist"]],decls:4,vars:3,consts:[["loginPrompt",""],["addItem",""],[4,"ngIf"],[4,"ngIf","ngIfElse"],[1,"btn","btn-link","button-remove","cx-action-link",3,"click","disabled","cxAtMessage"],[3,"type"],[1,"button-text"],[1,"btn","btn-link","button-add","cx-action-link",3,"click","disabled","cxAtMessage"],[1,"btn","btn-link","button-add-link","cx-action-link",3,"routerLink"]],template:function(o,d){o&1&&(_(0,rt,3,4,"ng-container",2),s(1,"async"),_(2,at,1,1,"ng-template",null,0,W)),o&2&&a("ngIf",p(1,1,d.product$))},dependencies:[B,z,D,K,F,Y,U],encapsulation:2,changeDetection:0});let t=i;return t})(),vt=(()=>{let i=class i{};i.\u0275fac=function(o){return new(o||i)},i.\u0275mod=w({type:i}),i.\u0275inj=b({providers:[N({cmsComponents:{AddToWishListComponent:{component:st}}})],imports:[$,O,G,R,H,Q]});let t=i;return t})();export{st as AddToWishListComponent,vt as AddToWishListModule};
